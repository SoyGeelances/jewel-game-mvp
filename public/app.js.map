{"version":3,"file":"app.js","mappings":"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","sources":["webpack://phaser-3-aec/external var \"Phaser\"","webpack://phaser-3-aec/./src/ts/Scenes/MainGame_Memo.ts","webpack://phaser-3-aec/./src/ts/observer/EventObserver.ts","webpack://phaser-3-aec/./src/ts/Scenes/Boot.ts","webpack://phaser-3-aec/./src/ts/Scenes/SplashScreen.ts","webpack://phaser-3-aec/./src/ts/components/Score.ts","webpack://phaser-3-aec/./src/ts/Screen/RetryScreen.ts","webpack://phaser-3-aec/./src/ts/Screen/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/MainGame_Candy.ts","webpack://phaser-3-aec/./src/ts/Scenes/Preloader.ts","webpack://phaser-3-aec/./node_modules/toggle-selection/index.js","webpack://phaser-3-aec/./src/ts/config/config.ts","webpack://phaser-3-aec/./src/ts/Screen/WinnerScreen.ts","webpack://phaser-3-aec/./src/ts/Screen/Screen.ts","webpack://phaser-3-aec/./src/ts/Game.ts","webpack://phaser-3-aec/./src/ts/components/CloseButton.ts","webpack://phaser-3-aec/./src/ts/components/Footer.ts","webpack://phaser-3-aec/./src/ts/components/Button.ts","webpack://phaser-3-aec/./src/ts/components/index.ts","webpack://phaser-3-aec/./src/ts/observer/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/MainMenu.ts","webpack://phaser-3-aec/./src/ts/handlers/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/LeavingGameScene.ts","webpack://phaser-3-aec/./src/ts/Screen/PromptScreen.ts","webpack://phaser-3-aec/./src/ts/handlers/ButtonEventHandler.ts","webpack://phaser-3-aec/./src/ts/Utilities.ts","webpack://phaser-3-aec/./src/ts/config/index.ts","webpack://phaser-3-aec/./node_modules/copy-to-clipboard/index.js","webpack://phaser-3-aec/./src/ts/Scenes/MainSettings.ts","webpack://phaser-3-aec/webpack/bootstrap","webpack://phaser-3-aec/webpack/startup"],"sourcesContent":["module.exports = Phaser;","import Utilities from \"../Utilities\";\nimport { WinnerScreen, RetryScreen } from '../Screen';\nimport { prompt } from '../config';\nimport { CloseButton } from '../components';\nimport { EventObserver } from \"../observer\";\nimport { ButtonEventHandler } from \"../handlers\";\n\nexport type LevelConfig = {\n\ttilesRow: number;\n\ttilesColumn: number;\n};\n\nexport default class MainGame extends Phaser.Scene {\n\twinnerScreen: WinnerScreen;\n\tretryScreen: RetryScreen;\n\tcloseButton: CloseButton;\n\teventObserver: EventObserver;\n\tgroup: Phaser.GameObjects.Group;\n\tscore: Phaser.GameObjects.Image;\n\tscoreText: Phaser.GameObjects.Text;\n\twithPreview = true;\n\twithRestartTime = true;\n\ttimer: Phaser.Time.TimerEvent;\n\tprogressBar: Phaser.GameObjects.Image;\n\tscoreValue = 0;\n\temptyGroup: Phaser.GameObjects.Group;\n\tresizeApplied = false;\n\tcellSizeX = 80;\n\tcellSizeY = 80;\n\tflipSpeed = 200;\n\tflipZoom = 1.05;\n\tlimitTime = 10* 1000;\n\tmaxTime = 60 * 1000;\n\tbaseScale = 0.6;\n\ttargetScore= 10000;\n\tsplitter = {\n\t\trows: 5,\n\t\tcolumns: 6,\n\t};\n\tnextLevelTimer: any = null\n\tstate = \"idle\";\n\tpreviewGoing = false;\n\tflippedCards: Phaser.GameObjects.Sprite[] = [];\n\tlevelDificulty = 1;\n\tconfigDificulty = [\n\t\t[2, 2],\n\t\t[2, 3],\n\t\t[2, 4],\n\t\t[2, 5],\n\t\t[3, 4],\n\t\t[4, 3],\n\t\t[6, 3],\n\t\t[4, 4],\n\t\t[4, 5],\n\t\t[4, 5],\n\t\t[5, 4],\n\t\t[6, 5],\n\t];\n\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"MainGame\";\n\n\tpublic init() {\n\t\tthis.resetGameState();\n\t\tif(window && window.innerHeight < 650 && !this.resizeApplied) {\n\t\t\tthis.resizeApplied = true;\n\t\t\tthis.cellSizeX = this.cellSizeX / 1.60;\n\t\t\tthis.cellSizeY = this.cellSizeY / 1.60;\n\t\t\tthis.flipZoom = this.flipZoom / 1.60;\n\t\t\tthis.baseScale = this.baseScale / 1.60;\n\t\t}\n\t}\n\n\tpublic preload(): void {\n\t\t// Preload as needed.\n\t}\n\n\tpublic exist(a: any) {\n\t\treturn a !== undefined && a !== null;\n\t}\n\n\tpublic getScoreValue() {\n\t\treturn this.scoreValue;\n\t}\n\n\tprivate resetGameState(): void {\n\t\tthis.scoreValue = 0;          // Reinicia el valor del puntaje\n\t\tthis.levelDificulty = 1;      // Vuelve al nivel 1\n\t\tthis.state = \"idle\";          // Cambia el estado del juego al inicial\n\t\tthis.previewGoing = false;    // Restablece si hay un preview activo\n\n\t}\n\n\tpublic checkMatch(): void {\n\n\t\tif (this.previewGoing) return;\n\t\tif (\n\t\t\t(this.flippedCards[0] as any).behindFrame ===\n\t\t\t(this.flippedCards[1] as any).behindFrame\n\t\t) {\n\t\t\tthis.flippedCards[0].disableInteractive();\n\t\t\tthis.flippedCards[1].disableInteractive();\n\t\t\t(this.flippedCards[0] as any).pending = false;\n\t\t\t(this.flippedCards[1] as any).pending = false;\n\n\t\t\tthis.tweens.add({\n\t\t\t\ttargets: this.flippedCards,\n\t\t\t\talpha: 0,\n\t\t\t\tduration: 500,\n\t\t\t\tyoyo: false,\n\t\t\t});\n\t\t\tif ( // chequea si no hay ninguna card dadas vueltas\n\t\t\t\tthis.group\n\t\t\t\t\t.getChildren()\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(card: Phaser.GameObjects.Sprite & any) => card.pending\n\t\t\t\t\t).length === 0 && this.nextLevelTimer == null\n\t\t\t) {\n\t\t\t\tthis.nextLevelTimer = setTimeout(() => {\n\t\t\t\t\tthis.createNextGame();\n\t\t\t\t\tclearTimeout(this.nextLevelTimer);\n\t\t\t\t\tthis.nextLevelTimer = null;\n\t\t\t\t}, 550);\n\t\t\t}\n\n\t\t\tthis.scoreValue = (Number(this.scoreValue) + 100) + (50 * this.levelDificulty);\n\t\t\tif(this.state !== \"end\") {\n\t\t\t\tthis.scoreText.setText(this.scoreValue.toString());\n\t\t\t\tthis.tweens.add({\n\t\t\t\t\ttargets: this.scoreText,\n\t\t\t\t\ty: 55 - 15,  // Hace que el texto suba\n\t\t\t\t\tscaleY: 1.2,  // Estira un poco el texto para simular el brinco\n\t\t\t\t\tduration: 200,  // Duración de la subida\n\t\t\t\t\tease: 'Power1',\n\t\t\t\t\tyoyo: true,  // Hace que vuelva a su posición original\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\t\t// Animación de caída\n\t\t\t\t\t\t\tthis.tweens.add({\n\t\t\t\t\t\t\t\t\ttargets: this.scoreText,\n\t\t\t\t\t\t\t\t\ty: 55,  // Hace que caiga un poco más abajo\n\t\t\t\t\t\t\t\t\tduration: 300,  // Duración de la caída\n\t\t\t\t\t\t\t\t\tease: 'Bounce.easeOut',  // Efecto de rebote al caer\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.sound.add('collectcoin').play();\n\t\t\t}\n\n\t\t} else {\n\t\t\tfor (let i = 0; i < this.flippedCards.length; i++) {\n\t\t\t\tconst obj = this.flippedCards[i];\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.flipTween(obj, true);\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t}\n\t\tthis.flippedCards = [];\n\t}\n\n\tpublic flipTween(\n\t\tcard: Phaser.GameObjects.Sprite & any,\n\t\tisReversed = false,\n\t\tcallback = () => null,\n\t\tcheck = true\n\t): void {\n\t\tif (!isReversed && card.isFlipping) return;\n\n\t\tif (isReversed && check) {\n\t\t\tcard.isFlipping = false;\n\t\t} else if (check) {\n\t\t\tcard.isFlipping = true;\n\t\t\tthis.flippedCards.push(card);\n\t\t}\n\t\tif(!this.game.sound.mute) this.sound.add('cardFlip', {\n\t\t\tvolume: 0.3\n\t\t}).play();\n\n\t\tthis.tweens.add({\n\t\t\ttargets: card,\n\t\t\tscaleX: 0.01,\n\t\t\tduration: this.flipSpeed / 2,\n\t\t\tyoyo: false,\n\t\t\tonComplete: () => {\n\t\t\t\tif (isReversed) card.setFrame(1);\n\t\t\t\telse card.setFrame(card.behindFrame);\n\t\t\t\tthis.tweens.add({\n\t\t\t\t\ttargets: card,\n\t\t\t\t\tscaleX: this.baseScale,\n\t\t\t\t\tduration: this.flipSpeed / 2,\n\t\t\t\t\tyoyo: false,\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic makeCardInteractive(card: Phaser.GameObjects.Sprite & any): void {\n\t\tcard.setScale(this.baseScale);\n\n\t\tcard.isFlipping = false;\n\t\tif (card.frame.name != 0) {\n\t\t\tcard.setInteractive();\n\t\t\tcard.on(\"pointerdown\", () => {\n\t\t\t\tif(this.flippedCards.length < 2) {\n\t\t\t\t\tthis.flipTween(card, false, () => {\n\t\t\t\t\t\tif (!this.previewGoing && this.flippedCards.length === 2) {\n\t\t\t\t\t\t\tthis.checkMatch();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic createGrid(config: LevelConfig) {\n\t\tconst middlePoint = {\n\t\t\tx: this.cameras.main.centerX,\n\t\t\ty: this.cameras.main.centerY,\n\t\t};\n\t\tconst tilesUsed = config.tilesRow * config.tilesColumn;\n\t\tconst amountOfTiles = tilesUsed / 2;\n\n\t\tconst possibleFrames = this.textures.get(\"cards\").getFrameNames();\n\t\tpossibleFrames.shift();\n\t\tpossibleFrames.shift();\n\n\t\tconst frames = [];\n\t\tfor (let i = 0; i < amountOfTiles; i++) {\n\t\t\tconst frame = Phaser.Math.RND.pick(possibleFrames);\n\t\t\tframes.push(frame);\n\t\t\tframes.push(frame);\n\t\t}\n\t\t// *** DEBUG ***\n\t\t// console.log(\"frames\",frames)\n\t\t// const countFrames = {};\n\t\t// frames.forEach((frame) => {\n\t\t// \tif (!countFrames[frame]) countFrames[frame] = 0;\n\t\t// \tcountFrames[frame]++;\n\t\t// });\n\t\t// console.log(\"countFrames\",countFrames)\n\n\t\tthis.emptyGroup = this.add.group();\n\t\tthis.group = this.add.group();\n\n\t\t// fill the group with the cards and shuffle them, two for each frame, fill the center first and leave the sides empty\n\n\t\tPhaser.Utils.Array.Shuffle(frames);\n\n\t\tfor (let i = 0; i < this.splitter.rows * this.splitter.columns; i++) {\n\t\t\tconst card = this.add.sprite(0, 0, \"cards\", 0).setScale(this.baseScale)\n\t\t\tthis.emptyGroup.add(card);\n\t\t}\n\n\t\tfor (let i = 0; i < config.tilesRow * config.tilesColumn; i++) {\n\t\t\tconst card = this.add.sprite(0, 0, \"cards\", 0).setScale(this.baseScale)\n\t\t\tthis.group.add(card);\n\t\t}\n\n\t\tPhaser.Utils.Array.Shuffle(this.group.getChildren());\n\n\t\tfor (let i = 0; i < this.group.getChildren().length; i++) {\n\t\t\tif (i >= frames.length) break;\n\t\t\t(this.group.getChildren()[i] as Phaser.GameObjects.Sprite).setFrame(1);\n\t\t\t(this.group.getChildren()[i] as any).behindFrame = frames[i];\n\t\t\t(this.group.getChildren()[i] as any).pending = true;\n\t\t\t\n\t\t}\n\n\t\tPhaser.Actions.GridAlign(this.emptyGroup.getChildren(), {\n\t\t\twidth: this.splitter.columns,\n\t\t\theight: this.splitter.rows,\n\t\t\tcellWidth: this.cellSizeX,\n\t\t\tcellHeight: this.cellSizeY,\n\t\t\tposition: Phaser.Display.Align.CENTER,\n\t\t\tx: middlePoint.x - (this.splitter.columns * this.cellSizeX) / 2,\n\t\t\ty: middlePoint.y - (this.splitter.rows * this.cellSizeY) / 2,\n\t\t});\n\n\t\tlet correctionX = 0;\n\t\tlet correctionY = 0;\n\n\t\t// Checkear si tilesRow es impar y si config.tilesRow es impar\n\n\t\tif (\n\t\t\t(this.splitter.columns % 2 === 0 && config.tilesColumn % 2 !== 0) ||\n\t\t\t(this.splitter.columns % 2 !== 0 && config.tilesColumn % 2 === 0)\n\t\t) {\n\t\t\tcorrectionX = this.cellSizeX / 2;\n\t\t}\n\n\t\tif (\n\t\t\t(this.splitter.rows % 2 === 0 && config.tilesRow % 2 !== 0) ||\n\t\t\t(this.splitter.rows % 2 !== 0 && config.tilesRow % 2 === 0)\n\t\t) {\n\t\t\tcorrectionY = this.cellSizeY / 2;\n\t\t}\n\n\t\tPhaser.Actions.GridAlign(this.group.getChildren(), {\n\t\t\twidth: config.tilesColumn,\n\t\t\theight: config.tilesRow,\n\t\t\tcellWidth: this.cellSizeX,\n\t\t\tcellHeight: this.cellSizeY,\n\t\t\tposition: Phaser.Display.Align.CENTER,\n\t\t\tx:\n\t\t\t\tmiddlePoint.x - (config.tilesColumn * this.cellSizeX) / 2 - correctionX,\n\t\t\ty: middlePoint.y - (config.tilesRow * this.cellSizeY) / 2 - correctionY,\n\t\t});\n\t\tif (this.withPreview) {\n\t\t\tthis.previewGoing = true;\n\t\t\tthis.group.getChildren().forEach((card: any) => {\n\t\t\t\tif (card) {\n\t\t\t\t\tthis.flipTween(\n\t\t\t\t\t\tcard,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.flipTween(\n\t\t\t\t\t\t\t\t\tcard,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tif(card) {\n\t\t\t\t\t\t\t\t\t\t\tthis.makeCardInteractive(card);\n\t\t\t\t\t\t\t\t\t\t\tthis.previewGoing = false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.group\n\t\t\t\t.getChildren()\n\t\t\t\t.forEach((card: Phaser.GameObjects.Sprite & any) => {\n\t\t\t\t\tif (card) this.makeCardInteractive(card);\n\t\t\t\t});\n\t\t}\n\t}\n\n\tpublic createNextGame() {\n\t\tif (this.state === \"end\") return;\n\t\tthis.levelDificulty++;\n\t\tthis.group.clear(true, true);\n\t\tthis.emptyGroup.clear(true, true);\n\t\tif (!this.configDificulty[this.levelDificulty - 1])\n\t\t\tthis.levelDificulty = this.configDificulty.length;\n\t\tconst dificulty = this.configDificulty[this.levelDificulty - 1];\n\t\tthis.createGrid({\n\t\t\ttilesRow: dificulty[0],\n\t\t\ttilesColumn: dificulty[1],\n\t\t});\n\t\tthis.timer.remove();\n\t\tthis.startTimer();\n\t}\n\n\tpublic endGame() {\n\t\t// add gray mask over all the scene\n\t\tthis.previewGoing = false;\n\t\tthis.state = \"end\";\n\n\t\tif (this.scoreValue >= this.targetScore) {\n\t\t\tthis.winnerScreen.show(prompt.win, \"winner_screen\");\n\t\t} else if( this.scoreValue >= 6501 &&  this.scoreValue <= 9999) {\n\t\t\tconst scoreValue = this.scoreValue;\n\t\t\tthis.retryScreen.setFinalScore(scoreValue);\n\t\t\tthis.retryScreen.show(prompt.narrowly, \"prompt_screen\");\n\t\t} else if (this.scoreValue < 6501)  {\n\t\t\tconst scoreValue = this.scoreValue;\n\t\t\tthis.retryScreen.setFinalScore(scoreValue);\n\t\t\tthis.retryScreen.show(prompt.retry, \"prompt_screen\");\n\t\t};\n\n\t\t//For Test\n\n\t\t// if (this.scoreValue >= this.targetScore) {\n\t\t// \tthis.winnerScreen.show(prompt.win, \"winner_screen\");\n\t\t// \tthis.removeInteractivityCards()\n\t\t// } else if( this.scoreValue >= 2501 &&  this.scoreValue <= 2999) {\n\t\t// \tconst scoreValue = this.scoreValue;\n\t\t// \tthis.retryScreen.setFinalScore(scoreValue);\n\t\t// \tthis.retryScreen.show(prompt.narrowly, \"prompt_screen\");\n\t\t// \tthis.removeInteractivityCards()\n\t\t// } else if (this.scoreValue < 2501)  {\n\t\t// \tconst scoreValue = this.scoreValue;\n\t\t// \tthis.retryScreen.setFinalScore(scoreValue);\n\t\t// \tthis.retryScreen.show(prompt.retry, \"prompt_screen\");\n\t\t// \tthis.removeInteractivityCards()\n\t\t// };\n\t\treturn;\t\n\t}\n\n\tpublic removeInteractivityCards() {\n\t\tthis.group.getChildren().forEach((card: any) => {\n\t\t\tcard.disableInteractive();\n\t\t})\n\t}\n\n\tpublic resetValues(): void {\n \t\tthis.scoreValue = 0;\n\t\tthis.levelDificulty = 1;\n\t}\n\n\tpublic adjustDepth(score: Phaser.GameObjects.Image, scoreText: Phaser.GameObjects.Text, depthScore:number = 10, depthScoreText:number = 10): void {\n\t\tscore.setDepth(depthScore);\n\t\tscoreText.setDepth(depthScoreText);\n\t}\n\n\tpublic startTimer() {\n\t\tconst newLimit = this.limitTime + ((this.levelDificulty * 2) * 1000);\n\t\tlet baseTime = Number(newLimit);\n\t\tif( baseTime > this.maxTime) baseTime = this.maxTime;\n\t\tlet progress = 100;\n\t\tthis.timer = this.time.addEvent({\n\t\t\tdelay: 1,\n\t\t\tcallback: () => {\n\t\t\t\tbaseTime--;\n\t\t\t\tprogress = baseTime / newLimit;\n\t\t\t\t// display image full height and % over with\n\t\t\t\tif(this.progressBar) {\n\t\t\t\t\tthis.progressBar.setCrop(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tthis.progressBar.width * progress,\n\t\t\t\t\t\tthis.progressBar.height\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (baseTime <= 0) {\n\t\t\t\t\tthis.timer.remove();\n\t\t\t\t\tthis.endGame();\n\t\t\t\t}\n\t\t\t},\n\t\t\tloop: true,\n\t\t});\n\t}\n\n\tsetSoundBtn() {\n\t\tconst soundBtn = this.add.image(35, 55, this.game.sound.mute ? \"sound_off\" : \"sound_on\").setScale(0.5);\n\t\tsoundBtn.setOrigin(0.5, 0.5);\n\t\tsoundBtn.setInteractive();\n\t\tsoundBtn.on(\"pointerdown\", () => {\n\t\t\tconst newMuteValue = !this.game.sound.mute;\n\t\t\tthis.game.sound.mute = newMuteValue\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t//@ts-ignore\n\t\t\tthis.game.soundManager.setMute(newMuteValue)\n\t\t\tsoundBtn.setTexture(newMuteValue ? \"sound_off\" : \"sound_on\");\n\t\t}, this);\n\t}\n\n\tpublic create(): void {\n\t\tthis.resetGameState();\n\t\tthis.previewGoing = false;\n\t\tthis.winnerScreen = new WinnerScreen(this);\n\t\tthis.retryScreen = new RetryScreen(this);\n\t\tthis.closeButton = new CloseButton(this);\n\t\tthis.eventObserver =  EventObserver.getInstance();\n\n\t\tUtilities.LogSceneMethodEntry(\"MainGame\", \"create\");\n\n\t\tconst background = this.add.image(\n\t\t\tthis.cameras.main.centerX,\n\t\t\t0,\n\t\t\t\"background_secondary\"\n\t\t);\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.cameras.main.width / background.width);\n\t\tlet baseScale = this.cameras.main.height / background.height;\n\t\tif (this.cameras.main.width / background.width > baseScale)\n\t\t\tbaseScale = this.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale);\n\n\t\t// this.setSoundBtn();\n\n\t\tthis.closeButton.create();\n\n\t\tthis.score = this.add.image(this.cameras.main.centerX -23, 60, \"score\")\n\t\t.setScale(1.09, 1.05)\n\t\t.setOrigin(0.5, 0.5);\n\n\n\t\tthis.scoreText = this.add.text(\n\t\t\tthis.cameras.main.centerX + 100 + 20,\n\t\t\t55,\n\t\t\tthis.scoreValue.toString(),\n\t\t\t{\n\t\t\t\tfont: \"40px montserrat-memo\",\n\t\t\t\tcolor: \"#E2D64B\",\n\t\t\t}\n\t\t);\n\t\tthis.scoreText.setOrigin(1, 0.5);\n\n\t\tconst progressFrame = this.add.image(\n\t\t\tthis.cameras.main.centerX,\n\t\t\tthis.cameras.main.centerY * 2 - 60,\n\t\t\t\"progress_frame\"\n\t\t);\n\t\tprogressFrame.setOrigin(0.5, 0.5).setScale(1.12);\n\n\t\tconst overProgressFrame = this.add.image(\n\t\t\tthis.cameras.main.centerX,\n\t\t\tthis.cameras.main.centerY * 2 - 60,\n\t\t\t\"progress_bar\"\n\t\t);\n\t\toverProgressFrame.setOrigin(0.5, 0.5).setScale(1.12);\n\t\tthis.progressBar = overProgressFrame;\n\t\tthis.startTimer();\n\t\tthis.splitter.rows = 6;\n\t\tthis.splitter.columns = 5;\n\n\t\tconst dificulty = this.configDificulty[this.levelDificulty - 1];\n\n\t\tthis.createGrid({\n\t\t\ttilesRow: dificulty[0],\n\t\t\ttilesColumn: dificulty[1],\n\t\t});\n\n\t\tconst powerBy = this.add.image(\n\t\t\tthis.cameras.main.centerX * 2,\n\t\t\t(this.cameras.main.centerY * 2),\n\t\t\t\"powerBySvg\"\n\t\t);\n\t\tpowerBy.setInteractive();\n\t\tpowerBy.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\");\n\t\t});\n\t\tpowerBy.setOrigin(1, 1);\n\t\tthis.state = \"start\";\n\t\tthis.registry.set('score', this.score);\n\t\tthis.registry.set('scoreText', this.scoreText);\n\n\t\tthis.eventObserver.on('button-clicked', (buttonId) => {\n\t\t\tButtonEventHandler.handleButtonEvents(buttonId, this)\n\t\t}, this);\n\t}\n\t\n}\n","// EventObserver.ts\nexport class EventObserver {\n\tprivate static instance: EventObserver;\n\tpublic eventEmitter: Phaser.Events.EventEmitter;\n\n\tprivate constructor() {\n\t\t\tthis.eventEmitter = new Phaser.Events.EventEmitter();\n\t}\n\n\tpublic static getInstance(): EventObserver {\n\t\t\tif (!EventObserver.instance) {\n\t\t\t\t\tEventObserver.instance = new EventObserver();\n\t\t\t}\n\t\t\treturn EventObserver.instance;\n\t}\n\n\tpublic on(event: string, callback: (a: any) => void, context?: any) {\n\t\t\tthis.eventEmitter.on(event, callback, context);\n\t}\n\n\tpublic emit(event: string, ...args: any[]) {\n\t\t\tthis.eventEmitter.emit(event, ...args);\n\t}\n}\n","import Preloader from \"./Preloader\";\nimport Utilities from \"../Utilities\";\n\nexport default class Boot extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"Boot\";\n\n\tpublic preload(): void {\n\t\t// Preload as needed.\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"Boot\", \"create\");\n\n\t\tthis.scene.start(Preloader.Name);\n\t}\n}\n","import Utilities from \"../Utilities\";\nimport MainMenu from \"./MainMenu\";\n\nexport default class SplashScreen extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"SplashScreen\";\n\n\tpublic preload(): void {\n\t\tthis.load.path = window.assetFolder ?? \"assets/\";\n\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"SplashScreen\", \"create\");\n\n\t\tthis.setBackground();\n\n\t\tconst powerBy = this.add.image(this.cameras.main.centerX * 2, (this.cameras.main.centerY * 2), \"powerBySvg\");\n\t\t\n\t\tpowerBy.setOrigin(1, 1);\n\t\tpowerBy.setInteractive();\n\t\tpowerBy.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\");\n\t\t});\n\t\tthis.time.addEvent({\n\t\t\t// Run after three seconds.\n\t\t\tdelay: 1000,\n\t\t\tcallback: this.loadMainMenu,\n\t\t\tcallbackScope: this,\n\t\t\tloop: false\n\t\t});\n\t}\n\n\tpublic setBackground() {\n\t\tconst background = this.add.image(this.cameras.main.centerX,0, \"background\");\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.cameras.main.width / background.width);\n\t\tlet baseScale = this.cameras.main.height / background.height\n\t\tif((this.cameras.main.width / background.width) > baseScale) baseScale = this.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale)\n\t}\n\n\t/**\n\t * Load the next scene, the main menu.\n\t */\n\tprivate loadMainMenu(): void {\n\t\tthis.scene.start(MainMenu.Name);\n\t}\n}\n","\n\nexport class Score {\n\tscore: Phaser.GameObjects.Image;\n\tscoreText: Phaser.GameObjects.Text;\n\n  constructor( private scene: Phaser.Scene ) {\n\n    this.score = this.scene.add.image(this.scene.cameras.main.centerX -30, 60, \"score\");\n\t\tthis.score.setOrigin(0.5, 0.5);\n  }\n\n\n}\n","\nimport { Footer } from \"../components/Footer\";\nimport { promptContentConfig } from \"../types\";\nimport { PromptScreen } from \"./PromptScreen\";\n\nexport class RetryScreen  {\n  private prompt: PromptScreen;\n  private finalScore: Phaser.GameObjects.Image;\n  private finalScoreText: Phaser.GameObjects.Text;\n\n  constructor(\n    private scene: Phaser.Scene,\n  ) {\n    this.prompt = new PromptScreen(scene);\n  }\n\n  addMask() {\n    this.prompt.addMask();\n  }\n\n  show(promptContent: promptContentConfig, promptType: string) {\n    this.prompt.setBackground(promptType, 0, 0, 1.2, 1.2);\n    this.prompt.setTitle(promptContent.title, 0, -133, 1.2, 1.2);\n    this.prompt.setMessage(promptContent.message, 0, -30, 1.2, 1.2);\n    this.prompt.setActions(promptContent.actions, 0, 60, 65, 1.2, 1.2);\n    // this.scene.sound.add('retry').play();\n    Footer.create(this.scene);\n  }\n\n\n  public setFinalScore(scoreValue) {\n    this.prompt.setSplashBackground();\n    this.finalScore = this.scene.add.image(this.scene.cameras.main.centerX, 60, \"final_score\")\n    .setScale(1.1, 1.1)\n    .setDepth(110)\n    .setOrigin(0.5, 0.5);\n\n    this.finalScoreText = this.scene.add.text(\n      this.scene.cameras.main.centerX + 135 + 20,\n      55,\n      scoreValue,\n      {\n        font: \"40px montserrat-memo\",\n        color: \"#E2D64B\",\n      }\n    )\n    .setDepth(110)\n    .setOrigin(1, 0.5);\n\n  }\n\n  hide(): void {\n    this.prompt.hide();\n  }\n}\n","export { WinnerScreen } from './WinnerScreen';\nexport { RetryScreen } from './RetryScreen';\nexport { PromptScreen } from './PromptScreen';\n","import Phaser from 'phaser'\nimport { WinnerScreen, RetryScreen } from '../Screen';\nimport { prompt } from '../config'\nimport { ButtonEventHandler } from '../handlers';\nimport { EventObserver } from '../observer';\nimport { CloseButton } from \"../components\";\nimport { Footer } from \"../components/Footer\";\n\n// Tamaño grilla\nconst GRID_WIDTH = 5\nconst GRID_HEIGHT = 6\nconst CANDY_WIDTH = 75.2\nconst CANDY_HEIGHT = 75.2\nconst GAP = 3\n\nexport default class MainGame extends Phaser.Scene {\n  public static Name = \"MainGame\"\n\n  private grid: Phaser.GameObjects.Sprite[][] = []\n  private offsetX = 0\n  private offsetY = 0\n  private selectedCandy: Phaser.GameObjects.Sprite | null = null\n  private movingCandiesInProcess = false\n  private retryScreen!: RetryScreen\n  private winnerScreen!: WinnerScreen\n  private scoreValue = 0\n  private scoreGoal = 80\n  private scoreText!: Phaser.GameObjects.Text\n\n  private progressBar!: Phaser.GameObjects.Graphics\n  private progressFrame!: Phaser.GameObjects.Image\n  private progressTimer!: Phaser.Time.TimerEvent\n  private totalTime = 80 // segundos\n  private eventObserver: EventObserver;\n  private gameState: 'playing' | 'ended' = 'playing';\n  private closeButton: CloseButton;\n\n  preload() {\n    this.load.spritesheet('candies', 'assets/spritesheet_cards_candy.png', {\n      frameWidth: 116,\n      frameHeight: 116,\n    })\n    this.load.image('progress-frame', 'assets/progress_bar_frame.png')\n  }\n\n  private getCandyPosition(row: number, col: number): { x: number; y: number } {\n    const x = this.offsetX + col * (CANDY_WIDTH + GAP) + CANDY_WIDTH / 2\n    const y = this.offsetY + row * (CANDY_HEIGHT + GAP) + CANDY_HEIGHT / 2\n    return { x, y }\n  }\n\n  createGrid() {\n    this.offsetX = (this.scale.width - (GRID_WIDTH * CANDY_WIDTH + (GRID_WIDTH - 1) * GAP)) / 2\n    const gridHeight = GRID_HEIGHT * CANDY_HEIGHT + (GRID_HEIGHT - 1) * GAP\n    this.offsetY = (this.scale.height - gridHeight) / 2\n\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n      this.grid[row] = []\n\n      for (let col = 0; col < GRID_WIDTH; col++) {\n        const candyType = Phaser.Math.Between(1, 7)\n\n        const x = this.offsetX + col * (CANDY_WIDTH + GAP) + CANDY_WIDTH / 2\n        const y = this.offsetY + row * (CANDY_HEIGHT + GAP) + CANDY_HEIGHT / 2\n\n        const candy = this.createCandy(x, y, candyType, row, col)\n        //this.add.rectangle(x, y, 40, 40, 0x00ff00).setStrokeStyle(2, 0x000000) \n        this.grid[row][col] = candy\n      }\n    }\n\n    const matches = this.getMatches()\n    if (matches.length > 0) {\n      console.log('MATCH FOUND:', matches.length, 'caramelos')\n      this.removeMatches(matches)\n\n      this.time.delayedCall(300, () => {\n        this.dropCandies()\n        this.time.delayedCall(300, () => {\n          this.refillGrid()\n        })\n      })\n    }\n  }\n\n  private createCandy(x: number, y: number, frame: number, row: number, col: number): Phaser.GameObjects.Sprite {\n    const candy = this.add.sprite(x, y, 'candies', frame).setScale(0.6)\n    candy.setData('type', frame)\n    candy.setData('row', row)\n    candy.setData('col', col)\n    candy.setInteractive()\n    candy.on('pointerdown', () => this.handleCandyClick(candy))\n    return candy\n  }\n\n  private areAdjacent(c1: Phaser.GameObjects.Sprite, c2: Phaser.GameObjects.Sprite): boolean {\n    const row1 = c1.getData('row')\n    const col1 = c1.getData('col')\n    const row2 = c2.getData('row')\n    const col2 = c2.getData('col')\n\n    const isNextTo = (Math.abs(row1 - row2) === 1 && col1 === col2) ||\n                    (Math.abs(col1 - col2) === 1 && row1 === row2)\n\n    return isNextTo\n  }\n\n  private handleCandyClick(candy: Phaser.GameObjects.Sprite) {\n    if (this.gameState === 'ended') return;\n    if (this.movingCandiesInProcess) return;\n\n    if (!this.selectedCandy) {\n        // Primer clic: seleccionamos este caramelo\n        this.selectedCandy = candy\n        candy.setScale(0.7) // Lo agrandamos visualmente\n    } else {\n        // Segundo clic: intercambiamos o reseteamos selección\n        const prevCandy = this.selectedCandy\n        prevCandy.setScale(0.6) // restauramos tamaño\n\n        if (prevCandy !== candy) {\n        // Aquí más adelante verificaremos si es movimiento válido\n        //console.log('Intercambiar:', prevCandy.getData('row'), prevCandy.getData('col'), '<->',candy.getData('row'), candy.getData('col')).\n            if (this.areAdjacent(prevCandy, candy)) {\n                this.swapCandies(prevCandy, candy)\n            } else {\n                console.log('No son adyacentes')\n            }\n        }\n\n        this.selectedCandy = null // reiniciamos selección\n    }\n  }\n\n  private swapCandies(c1: Phaser.GameObjects.Sprite, c2: Phaser.GameObjects.Sprite) {\n    this.movingCandiesInProcess = true\n\n    const row1 = c1.getData('row')\n    const col1 = c1.getData('col')\n    const row2 = c2.getData('row')\n    const col2 = c2.getData('col')\n    \n    // Animación visual (puedes usar .setPosition si no quieres animar)\n    this.tweens.add({\n        targets: c1,       // El sprite que queremos mover (caramelo 1)\n        x: c2.x,           // Nueva posición en X: la del caramelo 2\n        y: c2.y,           // Nueva posición en Y: la del caramelo 2\n        duration: 200      // Tiempo que dura la animación: 200 milisegundos (0.2 segundos)\n    })\n\n    this.tweens.add({\n        targets: c2,\n        x: c1.x,\n        y: c1.y,\n        duration: 200\n    })\n    \n    // Intercambio lógico en la grilla\n    this.grid[row1][col1] = c2\n    this.grid[row2][col2] = c1\n\n    // Actualizar los datos de posición\n    c1.setData('row', row2)\n    c1.setData('col', col2)\n    c2.setData('row', row1)\n    c2.setData('col', col1)\n\n    this.time.delayedCall(250, () => {\n        const matches = this.getMatches()\n            if (matches.length > 0) {\n                console.log('MATCH FOUND:', matches.length, 'caramelos')\n                this.removeMatches(matches)\n\n                this.time.delayedCall(300, () => {\n                this.dropCandies()\n\n                this.time.delayedCall(300, () => {\n                    this.refillGrid()\n                })\n                })\n            } else {\n                console.log('No hay combinaciones')\n                this.tweens.add({\n                    targets: c1,\n                    x: c2.x,\n                    y: c2.y,\n                    duration: 200\n                })\n                this.tweens.add({\n                    targets: c2,\n                    x: c1.x,\n                    y: c1.y,\n                    duration: 200\n                })\n\n                // Revertir lógica en la grilla\n                this.grid[row1][col1] = c1\n                this.grid[row2][col2] = c2\n\n                // Revertir datos\n                c1.setData('row', row1)\n                c1.setData('col', col1)\n                c2.setData('row', row2)\n                c2.setData('col', col2)\n\n                this.movingCandiesInProcess = false\n            }\n    })\n  }\n\n  private getMatches(): Phaser.GameObjects.Sprite[] {\n    const matches: Set<Phaser.GameObjects.Sprite> = new Set()\n\n    // Detectar combinaciones horizontales\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        let match: Phaser.GameObjects.Sprite[] = []\n\n        for (let col = 0; col < GRID_WIDTH; col++) {\n        const current = this.grid[row][col]\n        const prev = col > 0 ? this.grid[row][col - 1] : null\n\n        if (prev && current.getData('type') === prev.getData('type')) {\n            match.push(current)\n            if (match.length === 1) {\n            match.unshift(prev) // incluimos el primero que coincidió\n            }\n        } else {\n            if (match.length >= 3) {\n            match.forEach(c => matches.add(c)) // guardamos la combinación\n            }\n            match = [] // reiniciamos\n        }\n        }\n        if (match.length >= 3) {\n            match.forEach(c => matches.add(c)) // por si hay un match al final de la fila\n        }\n    }\n\n    // Detectar combinaciones verticales\n    for (let col = 0; col < GRID_WIDTH; col++) {\n        let match: Phaser.GameObjects.Sprite[] = []\n\n        for (let row = 0; row < GRID_HEIGHT; row++) {\n        const current = this.grid[row][col]\n        const prev = row > 0 ? this.grid[row - 1][col] : null\n\n        if (prev && current.getData('type') === prev.getData('type')) {\n            match.push(current)\n            if (match.length === 1) {\n            match.unshift(prev)\n            }\n        } else {\n            if (match.length >= 3) {\n            match.forEach(c => matches.add(c))\n            }\n            match = []\n        }\n        }\n        if (match.length >= 3) {\n        match.forEach(c => matches.add(c))\n        }\n    }\n\n    return Array.from(matches)\n  }\n\n  private updateScore(points: number) {\n    this.scoreValue += points\n    //console.log(\"score\",this.scoreValue);\n    this.scoreText.setText(this.scoreValue.toString())\n\n    if (this.scoreValue >= this.scoreGoal && this.gameState !== 'ended') {\n        this.endGame(); \n    }\n  }\n\n  private updateProgressBar(progress: number) {\n    const barWidth = 320\n    const barHeight = 29\n    const x = this.cameras.main.centerX - barWidth / 2\n    const y = this.scale.height - 86\n    const radius = 5;\n\n    this.progressBar.clear()\n\n    // Simula gradiente con color base sólido\n    this.progressBar.fillStyle(0x3dc51f, 1)\n    this.progressBar.fillRoundedRect(x, y, barWidth * progress, barHeight, radius);\n  }\n\n    private endGame() {\n    this.gameState = 'ended';\n    this.movingCandiesInProcess = false\n\n    if (this.scoreValue >= this.scoreGoal) {\n        this.winnerScreen.show(prompt.win, \"winner_screen\");\n        console.log('WIN');\n    } else {\n        console.log('ELSE');\n        this.retryScreen.setFinalScore(this.scoreValue);\n        this.retryScreen.show(prompt.retry, \"prompt_screen\");\n    }\n  }\n\n  private removeMatches(matches: Phaser.GameObjects.Sprite[]) {\n    //console.log(\"match.lenght\", matches.length * 10);\n    this.updateScore(matches.length * 10)\n    matches.forEach(candy => {\n        const row = candy.getData('row')\n        const col = candy.getData('col')\n\n        // Eliminar visualmente\n        candy.destroy()\n\n        // Eliminar de la grilla lógica\n        this.grid[row][col] = null\n    })\n  }\n\n  private dropCandies() {\n    if (this.gameState === 'ended') return;\n    for (let col = 0; col < GRID_WIDTH; col++) {\n        for (let row = GRID_HEIGHT - 1; row >= 0; row--) {\n            if (this.grid[row][col] === null) {\n                // Buscar el caramelo más cercano arriba\n                for (let aboveRow = row - 1; aboveRow >= 0; aboveRow--) {\n                const candyAbove = this.grid[aboveRow][col]\n                    if (candyAbove) {\n                        // Moverlo visualmente\n                        const { x, y } = this.getCandyPosition(row, col)\n                        this.tweens.add({\n                        targets: candyAbove,\n                        y: y,\n                        duration: 200\n                        })\n\n                        // Actualizar datos\n                        this.grid[row][col] = candyAbove\n                        candyAbove.setData('row', row)\n\n                        this.grid[aboveRow][col] = null\n                        break\n                    }\n                }\n            }\n        }\n    }\n  }\n\n  private refillGrid() {\n    if (this.gameState === 'ended') return;\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n            if (!this.grid[row][col]) {\n                const candyType = Phaser.Math.Between(1,6)\n                const { x, y } = this.getCandyPosition(row, col)\n                const initialY = y - 2 * (CANDY_HEIGHT + GAP)\n\n                const candy = this.add.sprite(x, initialY, 'candies', candyType).setScale(0.6)\n                candy.setData('type', candyType)\n                candy.setData('row', row)\n                candy.setData('col', col)\n                candy.setInteractive()\n                candy.on('pointerdown', () => this.handleCandyClick(candy))\n\n                this.grid[row][col] = candy\n\n                // animar caída\n                this.tweens.add({\n                    targets: candy,\n                    y: y,\n                    duration: 300\n                })\n            }\n        }\n    }\n\n    this.time.delayedCall(350, () => {\n        const newMatches = this.getMatches()\n        if (newMatches.length > 0) {\n            console.log('MATCH AUTOMÁTICO:', newMatches.length)\n            this.removeMatches(newMatches)\n\n            this.time.delayedCall(300, () => {\n                this.dropCandies()\n                this.time.delayedCall(300, () => {\n                this.refillGrid() // se repite hasta que ya no haya más\n                })\n            })\n        } else {\n            if (!this.hasPossibleMoves()) {\n                this.shuffleBoard()\n                this.time.delayedCall(100, () => this.refillGrid())\n            } else {\n                this.movingCandiesInProcess = false \n            }\n        }\n    })\n  }\n\n  private swapData(c1: Phaser.GameObjects.Sprite, c2: Phaser.GameObjects.Sprite) {\n    const row1 = c1.getData('row')\n    const col1 = c1.getData('col')\n    const row2 = c2.getData('row')\n    const col2 = c2.getData('col')\n\n    this.grid[row1][col1] = c2\n    this.grid[row2][col2] = c1\n\n    c1.setData('row', row2)\n    c1.setData('col', col2)\n    c2.setData('row', row1)\n    c2.setData('col', col1)\n  }\n\n  private hasPossibleMoves(): boolean {\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n        const current = this.grid[row][col]\n        const currentType = current.getData('type')\n\n        // Verificamos derecha\n        if (col < GRID_WIDTH - 1) {\n            const right = this.grid[row][col + 1]\n            if (right.getData('type') !== currentType) {\n            this.swapData(current, right)\n            const matches = this.getMatches()\n            this.swapData(current, right) // revertir\n            if (matches.length > 0) return true\n            }\n        }\n\n        // Verificamos abajo\n        if (row < GRID_HEIGHT - 1) {\n            const down = this.grid[row + 1][col]\n            if (down.getData('type') !== currentType) {\n            this.swapData(current, down)\n            const matches = this.getMatches()\n            this.swapData(current, down) // revertir\n            if (matches.length > 0) return true\n            }\n        }\n        }\n    }\n    return false\n  }\n\n  private shuffleBoard() {\n    const candies: Phaser.GameObjects.Sprite[] = []\n\n    // Recolectar todos los caramelos\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n            const candy = this.grid[row][col]\n            if (candy) {\n                candies.push(candy);\n            }\n        }\n    }\n\n    // Barajar\n    Phaser.Utils.Array.Shuffle(candies)\n\n    // Reasignar a la grilla con nuevas posiciones\n    let i = 0\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n        const candy = candies[i++]\n        const { x, y } = this.getCandyPosition(row, col)\n\n        candy.setPosition(x, y)\n        candy.setData('row', row)\n        candy.setData('col', col)\n        this.grid[row][col] = candy\n        }\n    }\n  }\n\n  create() {\n    this.gameState = 'playing';\n    this.closeButton = new CloseButton(this);\n    this.retryScreen = new RetryScreen(this)\n    this.winnerScreen = new WinnerScreen(this)\n    this.eventObserver = EventObserver.getInstance();\n\n    this.eventObserver.on('button-clicked', (buttonId: string) => {\n    ButtonEventHandler.handleButtonEvents(buttonId, this);\n    });\n\n    const scoreImage = this.add.image(20, 16, 'score').setOrigin(0, 0)\n    const scoreWidth = scoreImage.width;\n    const scoreHeight = scoreImage.height;\n\n    this.scoreValue = 0; \n    this.scoreText = this.add.text(20 + scoreWidth - 30, 17 + scoreHeight / 2, '0', {\n        fontFamily: 'montserrat-memo',\n        fontSize: '40px',\n        color: '#FEC647',\n        fontStyle: 'bold',\n    })\n    .setOrigin(1, 0.5)\n\n    this.progressFrame = this.add.image(this.cameras.main.centerX, this.scale.height - 68, 'progress-frame').setOrigin(0.5)\n    this.progressBar = this.add.graphics()\n    this.updateProgressBar(1)\n\n    this.progressTimer = this.time.addEvent({\n      delay: this.totalTime * 200,\n\n      callback: () => {\n        this.endGame()\n        console.log('Tiempo terminado')\n        console.log('scoreValue: ', this.scoreValue )\n      }\n    })\n\n    this.events.on('update', () => {\n      const progress = Phaser.Math.Clamp(1 - this.progressTimer.getElapsed() / this.progressTimer.delay, 0, 1)\n      this.updateProgressBar(progress)\n    })\n\n    this.closeButton.create();\n\t\tthis.eventObserver.on('button-clicked', (buttonId) => {\n\t\t\tButtonEventHandler.handleButtonEvents(buttonId, this)\n\t}, this);\n\n    Footer.create(this);\n    this.createGrid()\n  }\n\n  public getScoreValue(): string {\n    return this.scoreValue.toString();\n  }\n}\n","import SplashScreen from \"./SplashScreen\";\nimport Utilities from \"../Utilities\";\n\nexport default class Preloader extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"Preloader\";\n\n\tpublic preload(): void {\n\n\t\tthis.load.path = window.assetFolder ?? \"assets/\";\n\t\tthis.load.spritesheet('diamonds', 'diamonds32x24x5.png', { frameWidth: 32, frameHeight: 24 });\n\t\tthis.load.spritesheet(\"cards\", \"spritesheet_cards_2x_new.png\", { frameWidth: 58 * 2, frameHeight: 58 * 2 });\n        this.load.spritesheet('candies', 'spritesheet_cards_candy.png', { frameWidth: 116, frameHeight: 116, })\n\n\t\tthis.load.image(\"progress_frame\", \"progress_bar_frame.png\");\n\t\tthis.load.image(\"progress_bar\", \"progress_bar_full.png\");\n\t\t//this.load.image(\"powerBy\", \"powerBy_w.png\");\n\t\tthis.load.svg(\"powerBySvg\", \"powerBy_w.svg\", {width:400, height:30, scale: 1});\n\t\tthis.load.svg(\"tevas_title\", \"tevas_title.svg\");\n\t\tthis.load.svg(\"retry_button\", \"retry_button.svg\");\n\n\t\tthis.load.image(\"phaser_pixel_medium_flat\");\n\t\tthis.load.image(\"background\", \"background.png\");\n        this.load.image(\"background_main\", \"background_main.png\");\n\t\t\n\t\tthis.load.image(\"sound_off\", \"sound_off.png\");\n\t\tthis.load.image(\"sound_on\", \"sound_on.png\");\n\t\t\n\t\tthis.load.image(\"score\", \"frame-score.png\");\n\t\tthis.load.image(\"final_score\", \"final_score.png\");\n\t\tthis.load.image(\"prompt_screen\", \"prompt_screen.png\");\n\t\tthis.load.image(\"retry_message\", \"cada-vez-mas-cerca.png\");\n\t\tthis.load.image(\"close_button\", \"close.png\");\n\t\t// this.load.image(\"retry_button\", \"retry-btn.png\");\n\t\tthis.load.image(\"seguiintentando_title\", \"segui-intentando.png\");\n\t\tthis.load.image(\"porpoco_title\", \"porpoco_title.png\");\n\t\tthis.load.image(\"exit_saphirus_button\", \"ir_a_tienda.png\");\n\t\tthis.load.image(\"winner_screen\", \"win_screen.png\");\n\t\tthis.load.image(\"win_title\", \"win_title.png\");\n\t\tthis.load.image(\"win_message\", \"win_message.png\");\n\t\tthis.load.image(\"background_secondary\", \"background_secondary.png\");\n\t\t// this.load.image(\"tevas_title\", \"tevas_title.png\");\n\t\tthis.load.image(\"tevas_message\", \"tevas_message.png\");\n\t\tthis.load.image(\"tevas_button\", \"tevas_button.png\");\n\t\tthis.load.image(\"copy_coupon_button\", \"copy_coupon_button.png\");\n\t\tthis.load.image(\"copied_coupon_button\", \"copied_button.png\");\n\t\tthis.load.image(\"coupon_code_container\", \"coupon_code_container.png\");\n\t\t//this.load.image(\"saphirus_coin\", \"saphirus_coin.png\");\n\n\t\tthis.load.image(\"logo_candy_Arcor\", \"logo-candy-arcor.png\");\n        this.load.image(\"logo_candy_Arcor_win\", \"logo_candy_Arcor_win.png\");\n        this.load.image(\"logo_Arcor\", \"logo-arcor-en-casa.png\");\n\t\tthis.load.image(\"logo\", \"logo-home.png\");\t\n\t\tthis.load.image(\"play\", \"play.png\");\t\n\t\tthis.load.image(\"reset\", \"reset_2x.png\");\t\n\t\tthis.load.image(\"Phaser-Logo-Small\");\n\n\t\tthis.load.audio(\"music\", \"music.mp3\");\n\t\tthis.load.audio(\"coinsplash\", \"coinsplash.mp3\");\n\t\tthis.load.audio(\"collectcoin\", \"collectcoin.mp3\");\n\t\tthis.load.audio(\"tadaa\", \"tadaa.mp3\");\n\t\tthis.load.audio(\"retry\", \"retry.mp3\");\n\t\tthis.load.audio(\"cash\", \"cash-register.mp3\");\n\t\tthis.load.audio(\"cardFlip\", \"cardFlip.wav\");\n\t\t\n\n\t\t// You should remove this logic; this is only included here to show off the progress bar.\n\n\t}\n\n\tpublic init(): void {\n\t\tthis.addProgressBar();\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"Preloader\", \"create\");\n\n\t\tthis.scene.start(SplashScreen.Name);\n\n\t\tconst background = this.add.image(this.cameras.main.centerX,0, \"background\");\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.cameras.main.width / background.width);\n\t\tlet baseScale = this.cameras.main.height / background.height\n\t\tif((this.cameras.main.width / background.width) > baseScale) baseScale = this.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale)\n\n\t\tconst powerBy = this.add.image(this.cameras.main.centerX, this.cameras.main.centerY * 2, \"powerBy\");\n\t\tpowerBy.setInteractive();\n\t\tpowerBy.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\");\n\t\t});\n\t\tpowerBy.setOrigin(0.5, 1).setScale(1.15 / 3);\n\n\t}\n\n\tpublic update(): void {\n\t\t// preload handles updates to the progress bar, so nothing should be needed here.\n\t}\n\n\t/**\n\t * Adds a progress bar to the display, showing the percentage of assets loaded and their name.\n\t */\n\tprivate addProgressBar(): void {\n\t\tconst width = this.cameras.main.width;\n\t\tconst height = this.cameras.main.height;\n\t\t/** Customizable. This text color will be used around the progress bar. */\n\t\tconst outerTextColor = '#ffffff';\n\n\t\tconst progressBar = this.add.graphics();\n\t\tconst progressBox = this.add.graphics();\n\t\tprogressBox.fillStyle(0x009FAF, 0.8);\n\t\tprogressBox.fillRect(width / 4, height / 2 - 30, width / 2, 50);\n\t\tprogressBox.setDepth(110);\n\t\tprogressBar.setDepth(110);\n\t\t\n\t\tconst loadingText = this.make.text({\n\t\t\tx: width / 2,\n\t\t\ty: height / 2 - 50,\n\t\t\ttext: \"Cargando\",\n\t\t\tstyle: {\n\t\t\t\tfont: \"20px montserrat-memo\",\n\t\t\t\tcolor: \"#E2D64B\"\n\t\t\t}\n\t\t});\n\t\tloadingText.setOrigin(0.5, 0.5);\n\t\tloadingText.setDepth(110);\n\n\t\tconst percentText = this.make.text({\n\t\t\tx: width / 2,\n\t\t\ty: height / 2 - 5,\n\t\t\ttext: \"0%\",\n\t\t\tstyle: {\n\t\t\t\tfont: \"18px montserrat-memo\",\n\t\t\t\tcolor: \"#E2D64B\"\n\t\t\t}\n\t\t});\n\t\tpercentText.setOrigin(0.5, 0.5);\n\t\tpercentText.setDepth(110);\n\n\t\tconst assetText = this.make.text({\n\t\t\tx: width / 2,\n\t\t\ty: height / 2 + 50,\n\t\t\ttext: \"\",\n\t\t\tstyle: {\n\t\t\t\tfont: \"18px monospace\",\n\t\t\t\tcolor: outerTextColor\n\t\t\t}\n\t\t});\n\n\t\tassetText.setOrigin(0.5, 0.5);\n\t\tassetText.setDepth(110);\n\n\t\tthis.load.on(\"progress\", (value: number) => {\n\t\t\tpercentText.setText(parseInt(value * 100 + \"\", 10) + \"%\");\n\t\t\tprogressBar.clear();\n\t\t\tprogressBar.fillStyle(0x02055, 1); \n\t\t\tprogressBar.fillRect((width / 4) + 10, (height / 2) - 30 + 10, (width / 2 - 10 - 10) * value, 30);\n\t\t});\n\n\t\t// this.load.on(\"fileprogress\", (file: Phaser.Loader.File) => {\n\t\t// \tassetText.setText(\"Loading asset: \" + file.key);\n\t\t// });\n\n\t\tthis.load.on(\"complete\", () => {\n\t\t\tprogressBar.destroy();\n\t\t\tprogressBox.destroy();\n\t\t\tloadingText.destroy();\n\t\t\tpercentText.destroy();\n\t\t\tassetText.destroy();\n\t\t});\n\t}\n}\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","const buttons = { \n\n  retry: {\n    eventName: 'retry',\n    background: \"retry_button\"\n  },\n  exitArcor: {\n    eventName: 'exit',\n    background: \"exit_saphirus_button\"\n  },\n  back: {\n    eventName: 'back',\n    background: \"tevas_button\"\n  },\n  copy: {\n    eventName: 'copy',\n    background: \"copy_coupon_button\"\n  },\n  close: {\n    eventName: 'close',\n    background: \"close_button\"\n  },\n  copied: {\n    eventName: 'copy',\n    background: \"copied_coupon_button\"\n  }\n}\n\nconst prompt = {\n\n  retry: {\n    title: \"seguiintentando_title\",\n    message: \"retry_message\",\n    actions: [\n      buttons.retry,\n      buttons.exitArcor\n    ],\n    data: {}\n  },\n  narrowly: {\n    title: \"porpoco_title\",\n    message: \"retry_message\",\n    actions: [\n      buttons.retry,\n      buttons.exitArcor\n    ],\n    data: {}\n  },\n  win: {\n    title: \"win_title\",\n    message: \"win_message\",\n    actions: [\n      buttons.copy,\n      buttons.exitArcor\n    ],\n    data: {}\n  },\n  leaving: {\n    title: \"tevas_title\",\n    message:\"tevas_message\",\n    actions: [\n      buttons.back,\n      buttons.exitArcor\n    ],\n    data: {}\n  }\n}\n\nexport {\n  prompt,\n  buttons\n}\n\n\n","\nimport { Footer } from \"../components/Footer\";\nimport { promptContentConfig } from \"../types\";\nimport { PromptScreen } from \"./PromptScreen\";\nimport { EventObserver } from \"../observer\";\nimport { buttons } from \"../config\";\n\nexport class WinnerScreen  {\n  private scene;\n  private prompt: PromptScreen;\n  public couponCode: Phaser.GameObjects.Text;\n  private couponCodeContainer: Phaser.GameObjects.Image;\n  private saphirusCoin: Phaser.GameObjects.Image;\n  private finalScore: Phaser.GameObjects.Text;\n  eventObserver: EventObserver;\n\n  constructor( scene: Phaser.Scene ) {\n    this.prompt = new PromptScreen(scene);\n    this.scene = scene;\n    this.eventObserver = EventObserver.getInstance();\n  }\n\n  show(promptContent: promptContentConfig, promptType: string) {\n    this.scene.closeButton.destroy();\n    this.prompt.setSplashBackground();\n    this.setSplashLogo();\n    this.prompt.setBackground(promptType, 0, 80, 1.1, 1.1); \n    this.prompt.setTitle(promptContent.title, 0, -90, 1.1, 1.1);\n    this.setWinnerScore();\n    this.prompt.setMessage(promptContent.message, 0, 60, 1.1, 1.1);\n    this.setWinnerCouponCode();\n    this.prompt.setActions(promptContent.actions, 0, 190, 60, 1.1, 1.1);\n    this.scene.sound.add('tadaa').play({\n      volume: 0.3\n    });\n    //this.scene.removeInteractivityCards(); solo para memo\n    Footer.create(this.scene);\n\n    this.eventObserver.on('button-clicked', (buttonId) => {\n\t\tif (buttonId == 'copy') {\n            this.prompt.setActions([ buttons.copied ], 0, 190, 60, 1.1, 1.1);\n        }\n\n        setTimeout(() => {\n            this.prompt.setActions([ buttons.copy ], 0, 190, 60, 1.1, 1.1);\n        }, 1500);\n\t}, this);\n  }\n\n  private setSplashLogo() {\n    const logo = this.scene.add.image(\n      this.scene.cameras.main.centerX, \n      this.scene.cameras.main.centerY - 235, \n      \"logo_candy_Arcor_win\"\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(0)\n\n    this.scene.tweens.add({\n\t\t\ttargets: logo,\n\t\t\tscale: 0.8,\n\t\t\tdelay:0,\n\t\t\tduration: 10,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n  }\n\n  private setWinnerCouponCode() {\n    this.couponCodeContainer = this.scene.add.image(\n        this.scene.cameras.main.centerX, \n        this.scene.cameras.main.centerY + 130, \n        \"coupon_code_container\"\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);\n\n    this.couponCode = this.scene.add.text(\n      this.scene.cameras.main.centerX, \n      this.scene.cameras.main.centerY + 125,\n      this.scene.game.getCouponCode(),\n      {\n          font: \"20px montserrat-memo\",\n          color: \"#FFFFFF\",\n      }\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);\n\n    this.scene.tweens.add({\n      targets: this.couponCode,\n      y: this.couponCode.y - 30,  // Hace que el texto suba\n      scaleY: 1.2,  // Estira un poco el texto para simular el brinco\n      duration: 200,  // Duración de la subida\n      ease: 'Power1',\n      yoyo: true,  // Hace que vuelva a su posición original\n      onComplete: () => {\n          // Animación de caída\n          this.scene.tweens.add({\n              targets: this.couponCode,\n              y: this.scene.cameras.main.centerY + 128,  // Hace que caiga un poco más abajo\n              duration: 30,  // Duración de la caída\n              ease: 'Bounce.easeOut',  // Efecto de rebote al caer\n          });\n      }\n    });\n  }\n\n  private setWinnerScore() {\n    /*this.saphirusCoin = this.scene.add.image(\n        this.scene.cameras.main.centerX - 75,\n        this.scene.cameras.main.centerY - 10,\n        \"saphirus_coin\"\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);*/\n\n    this.finalScore = this.scene.add.text(\n      this.scene.cameras.main.centerX,\n      this.scene.cameras.main.centerY - 15,\n      this.scene.getScoreValue(),\n      {\n          font: \"40px montserrat-memo\",\n          color: \"#E2D64B\",\n      }\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);\n\n    /*this.scene.tweens.add({\n      targets: this.saphirusCoin,\n      scaleX: 0, // Achica la moneda en su eje X\n      duration: 500, // Duración de la primera mitad del giro\n      yoyo: true, // Hace que el tween vuelva a su estado original\n      repeat: -1, // Repetir indefinidamente\n      ease: 'Sine.easeInOut', // Tipo de easing\n      onUpdate: () => {\n          // Cambia el frame de la moneda en el punto medio de la animación (cuando scaleX llega a 0)\n          if (this.saphirusCoin.scaleX === 0) {\n              // Aquí podrías cambiar la imagen o el frame si quieres\n          }\n      }\n    });*/\n    \n  }\n\n  hide(): void {\n    this.prompt.hide();\n  }\n}\n","\nexport default abstract class Screen {\n  scene: Phaser.Scene;\n  private playButton: Phaser.GameObjects.Image;\n\n  constructor(scene: Phaser.Scene) {\n      this.scene = scene;\n  }\n\n  abstract show(): void;\n\n  abstract hide(): void;\n\n  protected setSplashBackground() {\n    const background = this.scene.add.image(this.scene.cameras.main.centerX,0, \"background_secondary\");\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.scene.cameras.main.width / background.width);\n\t\tlet baseScale = this.scene.cameras.main.height / background.height\n\t\tif((this.scene.cameras.main.width / background.width) > baseScale) baseScale = this.scene.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale)\n  }\n\n  protected addMask(): void {\n    const mask = this.scene.add.graphics();\n    mask.fillStyle(0x000000, 0.5);\n    mask.fillRect(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height);\n    mask.setDepth(3);\n  }\n\n\n  protected adjustDepth(score: Phaser.GameObjects.Image, scoreText: Phaser.GameObjects.Text, depthScore:number = 10, depthScoreText:number = 10): void {\n\t\tscore.setDepth(depthScore);\n\t\tscoreText.setDepth(depthScoreText);\n\t}\n}\n","import 'phaser';\nimport Boot from \"./Scenes/Boot\";\nimport Preloader from \"./Scenes/Preloader\";\nimport MainMenu from \"./Scenes/MainMenu\";\nimport SplashScreen from \"./Scenes/SplashScreen\";\nimport Utilities from \"./Utilities\";\nimport MainGameJewel from \"./Scenes/MainGame_Jewel\";\nimport MainGameCandy from \"./Scenes/MainGame_Candy\";\nimport MainGameMemo from \"./Scenes/MainGame_Memo\";\nimport MainSettings from \"./Scenes/MainSettings\";\nimport LeavingGameScene from \"./Scenes/LeavingGameScene\";\n\nconst gameConfig: Phaser.Types.Core.GameConfig = {\n\twidth: 400 > window.innerWidth ? window.innerWidth : 400,\n\theight: window.innerHeight,\n\ttype: Phaser.AUTO,\n\ttransparent: true,\n\tparent: \"content\",\n\ttitle: \"Juego de Memotest para Saphirus\"\n};\n\nexport default class Game extends Phaser.Game {\n\tonCloseGame?: () => void;\n\tselectedCoupon: string = 'PRIMAVERA-5U5Y5';\n\n\tconstructor(config: Phaser.Types.Core.GameConfig & PhaserGameOptions) {\n\t\tUtilities.LogSceneMethodEntry(\"Game\", \"constructor\");\n\t\tsuper(config);\n\t\tthis.onCloseGame = config.onClose;\n\t\tthis.scene.add(Boot.Name, Boot);\n\t\tthis.scene.add(Preloader.Name, Preloader);\n\t\tthis.scene.add(SplashScreen.Name, SplashScreen);\n\t\tthis.scene.add(MainMenu.Name, MainMenu);\n\t\t//this.scene.add(MainGameJewel.Name, MainGameJewel);\n        this.scene.add(MainGameCandy.Name, MainGameCandy);\n\t\t//this.scene.add(MainGameMemo.Name, MainGameMemo);\n\t\tthis.scene.add(LeavingGameScene.Name, LeavingGameScene);\n\t\tthis.scene.add(MainSettings.Name, MainSettings);\n\t\tthis.scene.start(Boot.Name);\n\t\tthis.selectedCoupon = this.getRandomCoupon();\n\t}\n\n\tpublic getRandomCoupon() {\n\t\tconst coupons = [\n\t\t\t'PRIMAVERA-096JB', 'PRIMAVERA-1YPLD', 'PRIMAVERA-2HBCV', 'PRIMAVERA-307TT',\n\t\t\t'PRIMAVERA-4WXTB', 'PRIMAVERA-5U5Y5', 'PRIMAVERA-60ASF', 'PRIMAVERA-7P6DY',\n\t\t\t'PRIMAVERA-8S8FJ4', 'PRIMAVERA-94X04'\n\t\t];\n    const randomIndex = Math.floor(Math.random() * coupons.length);\n    return coupons[randomIndex];\n\t}\n\n\tpublic getCouponCode() {\n\t\treturn this.selectedCoupon;\n\t}\n}\n\n/**\n * Workaround for inability to scale in Phaser 3.\n * From http://www.emanueleferonato.com/2018/02/16/how-to-scale-your-html5-games-if-your-framework-does-not-feature-a-scale-manager-or-if-you-do-not-use-any-framework/\n */\nfunction resize(game: Game): void {\n    let width = 400;\n    \n    if (window.innerWidth === 428) { \n        width = 440;\n    } else if (window.innerWidth === 414) { \n        width = 414; \n    } else if (width > window.innerWidth) {\n        width = window.innerWidth;\n    }\n\n    const height = window.innerHeight;\n\n    if (game) {\n        game.scale.resize(width, height);\n        game.renderer.resize(width, height);\n        game.scene.scenes.forEach((scene) => {    \n            if (scene.cameras.main && scene.scene.isActive()) {\n                scene.cameras.main.setViewport(0, 0, width, height);\n                \n                const zoomFactor = window.innerWidth / 400;\n                scene.cameras.main.setZoom(zoomFactor);\n                \n                game.scale.refresh();\n                scene.cameras.main.flash(1000);\n                scene.scene.stop();\n                scene.scene.start();\n            }\n        });\n    }\n}\n\ntype PhaserGameOptions = {\n\tparent?: string;\n\tassetFolder? : string;\n\tonClose?: () => void;\n\tcouponcode?: string;\n\t// more options\n}\n\ndeclare global {\n\tinterface Window {\n\t\tnewGame: (options: PhaserGameOptions) => void;\n\t\tassetFolder?: string;\n\t\tgame?: Game;\n\t}\n}\n\n\nif (window) {\n\twindow.newGame = (options: PhaserGameOptions) => {\n\t\tconst newOptions = {...gameConfig, ...options}\n\n\t\tif(newOptions.assetFolder) window.assetFolder = newOptions.assetFolder;\n\t\tconst game = new Game(newOptions as Phaser.Types.Core.GameConfig & PhaserGameOptions);\t\n\t\twindow.game = game;\n\t\t// Uncomment the following two lines if you want the game to scale to fill the entire page, but keep the game ratio.\n\t\tresize(game);\n\t\twindow.addEventListener(\"resize\", () => resize(game), true);\n\t}\n\n\twindow.onload = (): void => {\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\tconst async = urlParams.get('async')\n\t\t\n\t\tif(!async) {\n\t\t\twindow.newGame({});\n\t\t} else {\n\t\t\tconsole.log(\"Waiting for instructions\")\n\t\t}\n\n\t}\n}\n","import { Button } from \"./Button\";\nimport { buttons } from \"../config\";\nimport { prompt } from \"../config\";\n\nexport class CloseButton {\n\tpublic static Name = \"CloseButtonScene\";\n\tprivate scene;\n\tprivate button: Button;\n\n\tconstructor(scene: Phaser.Scene) {\n\t\tthis.scene = scene;\n\t}\n\n\tpublic create(deviationX = 0, deviationY = 4) {\n\t\tconst margin = 35;\n\t\tthis.button = new Button(\n\t\t\tthis.scene,\n\t\t\tthis.scene.cameras.main.scrollX +\n\t\t\t\tthis.scene.cameras.main.width -\n\t\t\t\tmargin +\n\t\t\t\tdeviationX,\n\t\t\tthis.scene.cameras.main.scrollY + margin + deviationY,\n\t\t\tbuttons.close,\n\t\t\t1.05,\n\t\t\t1.05\n\t\t);\n\n\t\tthis.button.createButton();\n\n\t}\n\n\tpublic destroy() {\n\t\tthis.button.destroy();\n\t}\n}\n","\nexport class Footer {\n\n  public static create(scene: Phaser.Scene) {\n    scene.add.image(scene.cameras.main.centerX * 2, (scene.cameras.main.centerY * 2), \"powerBySvg\")\n\t\t.setInteractive()\n\t\t.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\")\n\t\t})\n\t\t.setOrigin(1, 1)\n    .setDepth(110);\n  }\n\n}\n","\nimport { promptActions } from \"../types\"\nimport { EventObserver } from \"../observer\";\n\nexport class Button {\n    private button: Phaser.GameObjects.Image;\n\t  eventObserver: EventObserver;\n    \n    constructor(\n        private scene: Phaser.Scene,         // La escena actual de Phaser\n        private x: number,                   // Coordenada X\n        private y: number,                   // Coordenada Y\n        private action: promptActions,\n        private scaleX: number = 1,\n        private scaleY: number = 1,    \n    ) {\n\t\t this.eventObserver =  EventObserver.getInstance();\n    }\n\n    public createButton(): void {\n        this.button = this.scene.add.image(this.x, this.y, this.action.background)\n        .setInteractive()\n        .on('pointerdown', (e) => {\n            // this.pressButtonEffect();\n            this.eventObserver.emit('button-clicked', this.action.eventName);\n        })\n        .on('pointerup', () => {\n            this.releaseButtonEffect();\n        })\n        .on('pointerout', () => {\n            this.button.setTint(0xffffff);\n            this.releaseButtonEffect();\n        })\n        .setOrigin(0.5, 0.5)\n        .setDepth(100)\n        .setScale(this.scaleX, this.scaleY);\n\n    }\n\n    private pressButtonEffect(): void {\n        this.scene.tweens.add({\n          targets: this.button,\n          scaleX: this.scaleX * 0.9,  // Reduce la escala en el eje X\n          scaleY: this.scaleY * 0.9,  // Reduce la escala en el eje Y\n          duration: 100,\n          ease: 'Power1'\n        });\n      }\n    \n      private releaseButtonEffect(): void {\n        this.scene.tweens.add({\n          targets: this.button,\n          scaleX: this.scaleX,  // Vuelve a la escala original en el eje X\n          scaleY: this.scaleY,  // Vuelve a la escala original en el eje Y\n          duration: 300,\n          ease: 'Power1'\n        });\n      }\n\n    public destroy(): void {\n        this.button.destroy();\n    }\n}\n","export  { Button } from './Button';\nexport  { CloseButton } from './CloseButton';\nexport  { Score } from './Score'\n","export {EventObserver} from \"./EventObserver\"\n","import Utilities from \"../Utilities\";\nimport MainGame from \"./MainGame_Memo\";\nimport { CloseButton } from \"../components\";\nimport { RetryScreen } from '../Screen';\nimport { EventObserver } from \"../observer\";\nimport { ButtonEventHandler } from \"../handlers\";\nimport { Footer } from \"../components/Footer\";\n\nexport default class MainMenu extends Phaser.Scene {\n\tmusic: Phaser.Sound.BaseSound;\n\talreadyPlayignMusic = false\n\tcloseButton: CloseButton;\n\tretryScreen: RetryScreen;\n\teventObserver: EventObserver;\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"MainMenu\";\n\n\tpublic init(){\n\t\t//this.closeButton = new CloseButton(this);\n\t\tthis.retryScreen = new RetryScreen(this);\n\t\tthis.eventObserver = EventObserver.getInstance();\n\n\t\t// this.game.config.audio.disableWebAudio = true;\n\t\tthis.game.config.audio.disableWebAudio = false;\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t//@ts-ignore\n\t\tthis.game.soundManager = Phaser.Sound.SoundManagerCreator.create(this.game)\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t//@ts-ignore\n\t\tthis.music = this.game.soundManager;\n\t\tthis.game.sound.mute = false;\n\n\t}\n\n\tpublic preload(): void {\n\t\t// Preload as needed.\n\t}\n\n\tpublic pauseScene() {\n\t\tthis.scene.pause(MainMenu.Name)\n\t}\n\n\tpublic resumeScene() {\n\t\tthis.scene.resume(MainMenu.Name)\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"MainMenu\", \"create\");\n\n\t\tif(!this.alreadyPlayignMusic) {\n\t\t\tthis.alreadyPlayignMusic = true;\n\t\t\t// this.music.play(\"music\",{\n\t\t\t// \tvolume: 0.06,\n\t\t\t// \tloop: true\n\t\t\t// });\n\t\t}\n\n        const background = this.add.image(this.cameras.main.centerX, this.cameras.main.height, \"background_main\");\n        background.setOrigin(0.5, 1); \n\n        let scaleX = this.cameras.main.width / background.width;\n        let scaleY = this.cameras.main.height / background.height;\n        let scale = Math.max(scaleX, scaleY);\n\n        background.setScale(scale);\n\n\n\t\t// const soundBtn = this.add.image(35, 55, \"sound_on\").setScale(0.5);\n\t\t// soundBtn.setOrigin(0.5, 0.5);\n\t\t// soundBtn.setInteractive();\n\t\t// soundBtn.on(\"pointerdown\", () => {\n\t\t// \tconst newMuteValue = !this.game.sound.mute;\n\t\t// \tthis.game.sound.mute = newMuteValue\n\t\t// \t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// \t//@ts-ignore\n\t\t// \tthis.music.setMute(newMuteValue)\n\t\t// \tsoundBtn.setTexture(newMuteValue ? \"sound_off\" : \"sound_on\");\n\t\t// }, this);\n\n\n\t\tconst detail1 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies\", 2).setOrigin(0.5).setScale(0);\n\t\tconst detail2 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies\", 3).setOrigin(0.5).setScale(0);\n\n        const logoArcor = this.add.image(this.cameras.main.centerX, 50, \"logo_Arcor\").setScale(0).setOrigin(0.5, 0);\n\n\t\tconst logo = this.add.image(this.cameras.main.centerX, this.cameras.main.centerY * 0.5, \"logo_candy_Arcor\").setScale(0);\n\t\tlogo.setOrigin(0.5, 0);\n\n\t\tconst playButton = this.add.image(this.cameras.main.centerX, this.cameras.main.centerY * 1.2, \"play\").setScale(0);\n\n        this.tweens.add({\n\t\t\ttargets: logoArcor,\n\t\t\tscale: 1,\n\t\t\tdelay:0,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n\t\tthis.tweens.add({\n\t\t\ttargets: logo,\n\t\t\tscale: 1.1,\n\t\t\tdelay:0,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n\t\tthis.tweens.add({\n\t\t\ttargets: playButton,\n\t\t\tscale: 1,\n\t\t\tdelay:200,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\t\tconst baseX = detail1.x\n\t\tconst baseY = detail1.y\n\t\tthis.tweens.add({\n\t\t\ttargets: detail1,\n\t\t\tscale: 0.6,\n\t\t\tx: baseX - 110,\n\t\t\ty: baseY - 20,\n\t\t\tangle: 45,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\t\t\n\t\tthis.tweens.add({\n\t\t\ttargets: detail2,\n\t\t\tscale: 0.6,\n\t\t\tx: baseX + 100,\n\t\t\ty: baseY - 20,\n\t\t\tangle: 45,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n\t\tthis.tweens.add({\n\t\t\ttargets: [detail2],\n\t\t\tscale: 0.65,\n\t\t\tdelay:1200,\n\t\t\tangle: 40,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n\t\tthis.tweens.add({\n\t\t\ttargets: [detail1],\n\t\t\tscale: 0.65,\n\t\t\tdelay:1300,\n\t\t\tangle: 42,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n\n\n\t\tplayButton.setOrigin(0.5, 0.5);\n\t\tplayButton.setInteractive();\n\t\tplayButton.on(\"pointerover\", () => { playButton.setTint(0xeeeeee); }, this);\n\t\tplayButton.on(\"pointerout\", () => { playButton.setTint(0xffffff); }, this);\n\t\tplayButton.on(\"pointerdown\", () => { this.scene.start(MainGame.Name); }, this);\n\n        Footer.create(this);\n\t}\n\n\tpublic update(): void {\n\t\t// Update logic, as needed.\n\t}\n}\n","export {ButtonEventHandler} from './ButtonEventHandler'\n","\nimport { RetryScreen } from \"../Screen\";\nimport { prompt } from \"../config\";\n\nexport default class LeavingGameScene extends Phaser.Scene {\n\n  public static Name = 'LeavingGameScene';\n  \n  constructor() {\n      super({ key: 'LeavingGameScene' });\n  }\n\n  create() {\n    const leavingScreen = new RetryScreen(this);\n    leavingScreen.addMask();\n    leavingScreen.show(prompt.leaving, \"prompt_screen\")\n  }\n}\n","import Screen from \"./Screen\";\nimport { Button } from \"../components\";\nimport { promptActions } from \"../types\";\n\nexport class PromptScreen extends Screen {\n  protected promptTitle: Phaser.GameObjects.Image;\n  protected promptMessage: Phaser.GameObjects.Image;\n  protected background: Phaser.GameObjects.Image;\n  protected actions: Button[] = [];\n\n  constructor(\n    scene: Phaser.Scene\n  ) {\n    super(scene);\n  }\n\n  setSplashBackground() {\n    super.setSplashBackground();\n  }\n\n  addMask() {\n    super.addMask();\n  }\n\n  setBackground(promptType: string, deviationX=0, deviationY=0, scaleX=1, scaleY=1) {\n    this.background = this.scene.add.image(this.scene.cameras.main.centerX + (deviationX), this.scene.cameras.main.centerY + (deviationY), promptType)\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(scaleX, scaleY);\n  }\n\n  setTitle(promptTitle: string, deviationX=0, deviationY=0, scaleX=1, scaleY=1) {\n    this.promptTitle = this.scene.add.image(this.scene.cameras.main.centerX + (deviationX), this.scene.cameras.main.centerY + (deviationY), promptTitle)\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(scaleX, scaleY);\n  }\n\n  setMessage(promptMessage: string, deviationX=0, deviationY=0, scaleX=1, scaleY=1) {\n    this.promptMessage = this.scene.add.image(this.scene.cameras.main.centerX + (deviationX), this.scene.cameras.main.centerY + (deviationY), promptMessage)\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(scaleX, scaleY);\n  }\n\n  setActions(promptActions: Array<promptActions>, deviationX=0, deviationY=0, separation=0, scaleX=1, scaleY=1) {\n    promptActions.forEach((action, index) => {\n      const button = new Button(\n          this.scene,\n          this.scene.cameras.main.centerX + deviationX,\n          this.scene.cameras.main.centerY + deviationY + (index * separation),\n          action,\n          scaleX,\n          scaleY\n      );\n      button.createButton();\n      this.actions.push(button);\n    });\n  }\n\n  show(): void {}\n\n  hide(): void {\n    this.promptTitle.destroy();\n    this.promptMessage.destroy();\n    this.background.destroy();    \n    this.actions.forEach(button => button.destroy());\n  }\n}\n","import Game from \"../Game\";\nimport copy from 'copy-to-clipboard';\n\nexport class ButtonEventHandler {\n    public static handleButtonEvents(buttonId: string, scene: Phaser.Scene) {\n        let sound = scene.sound.add(\"cash\");\n\n        switch (buttonId) {\n            case \"close\":\n                ButtonEventHandler.handleCloseEvent(scene);\n                break;\n\n            case \"back\":\n                ButtonEventHandler.handleBackEvent(scene);\n                break;\n\n            case \"exit\":\n                if ((scene.game as Game).onCloseGame) (scene.game as Game).onCloseGame();\n                window.location.href = 'https://arcorencasa.com/tienda/';\n                break;\n\n            case \"retry\":\n                ButtonEventHandler.handlePlayAgain(scene);\n                break;\n\n            case \"copy\":\n                ButtonEventHandler.handleCopyCode(scene);\n                sound.play();\n                break;\n\n            default:\n                console.log(\"Botón no reconocido:\", buttonId);\n                break;\n        }\n    }\n\n    private static handleCloseEvent(scene: Phaser.Scene) {\n        scene.scene.launch(\"LeavingGameScene\");\n        scene.scene.pause();\n    }\n\n    private static handleBackEvent(scene: Phaser.Scene) {\n        scene.scene.resume();\n        scene.scene.stop(\"LeavingGameScene\");\n    }\n\n    private static handlePlayAgain(scene: Phaser.Scene) {\n        scene.scene.stop('MainMenu');\n        scene.scene.restart();\n    }\n\n    // Método que detecta si es iOS\n    private static isIOS() {\n        return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    }\n\n    // Método para copiar usando la función probada que usaste en tu HTML\n    private static copyToClipboard(text: string) {\n        copy(text,{\n            debug: true,\n            message: 'Selecciona todo el texto en el recuadro, presiona “Copiar” y luego “Cancelar”.',\n        });\n    }\n    \n    // Método para copiar el texto en otros navegadores o usando el fallback\n    private static fallbackCopyTextToClipboard(text: string) {\n        const textArea = document.createElement('textarea');\n        textArea.value = text;\n        textArea.style.position = 'fixed';\n        textArea.style.left = '-9999px'; // Moverlo fuera de la pantalla\n        document.body.appendChild(textArea);\n\n        textArea.select();\n        try {\n            document.execCommand('copy');\n            console.log('Texto copiado usando el fallback');\n        } catch (err) {\n            console.error('Error al copiar el texto usando el fallback', err);\n        }\n\n        document.body.removeChild(textArea);\n    }\n\n    // Modificar handleCopyCode para usar la nueva lógica\n    private static handleCopyCode(scene: Phaser.Scene) {\n        const code = (scene.game as Game).selectedCoupon;\n\n        // Usamos la función de copia que probaste con éxito\n        if (ButtonEventHandler.isIOS()) {\n            ButtonEventHandler.copyToClipboard(code); // Para iOS también usamos esta lógica\n        } else {\n            ButtonEventHandler.copyToClipboard(code);\n        }\n    }\n}\n","export default class Utilities {\n\t/**\n\t * Logs a particular message to the console.\n\t * @param message Message to log.\n\t */\n\tpublic static Log(message: string): void {\n\t\tconsole.log((new Date()).toISOString() + \" : \" + message);\n\t}\n\n\t/**\n\t * Logs the start of a method in a scene.\n\t * @param sceneName Name of the scene.\n\t * @param method Method called within the scene.\n\t */\n\tpublic static LogSceneMethodEntry(sceneName: string, method: string): void {\n\t\tthis.Log(\"Entered \" + sceneName + \" \" + method + \"()\");\n\t}\n}\n","export * from \"./config\"\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"⌘\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // avoid screen readers from reading out loud the text\n    mark.ariaHidden = \"true\"\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","import Utilities from \"../Utilities\";\nimport MainMenu from \"./MainMenu\";\n\nexport default class MainSettings extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"MainSettings\";\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"MainSettings\", \"create\");\n\t\tconst startYPosition = this.cameras.main.height / 4;\n\t\tconst fontSize = 25;\n\n\t\t// Add a button to return to the main menu.\n\t\tconst backText = this.add.text(this.cameras.main.centerX, startYPosition * 2, \"Go Back\");\n\t\tbackText\n\t\t\t.setOrigin(0.5)\n\t\t\t.setFontFamily(\"monospace\").setFontSize(fontSize).setFill(\"#fff\")\n\t\t\t.setInteractive();\n\t\tbackText.on(\"pointerdown\", () => { this.scene.start(MainMenu.Name); }, this);\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(552);\n"],"names":["module","exports","Phaser","MainGame","Scene","withPreview","withRestartTime","scoreValue","resizeApplied","cellSizeX","cellSizeY","flipSpeed","flipZoom","limitTime","maxTime","baseScale","targetScore","splitter","rows","columns","nextLevelTimer","state","previewGoing","flippedCards","levelDificulty","configDificulty","init","this","resetGameState","window","innerHeight","preload","exist","a","getScoreValue","checkMatch","behindFrame","disableInteractive","pending","tweens","add","targets","alpha","duration","yoyo","group","getChildren","filter","card","length","setTimeout","createNextGame","clearTimeout","Number","scoreText","setText","toString","y","scaleY","ease","onComplete","sound","play","i","obj","flipTween","isReversed","callback","check","isFlipping","push","game","mute","volume","scaleX","setFrame","makeCardInteractive","setScale","frame","name","setInteractive","on","createGrid","config","middlePoint","cameras","main","centerX","centerY","amountOfTiles","tilesRow","tilesColumn","possibleFrames","textures","get","getFrameNames","shift","frames","Math","RND","pick","emptyGroup","Utils","Array","Shuffle","sprite","Actions","GridAlign","width","height","cellWidth","cellHeight","position","Display","Align","CENTER","x","correctionX","correctionY","forEach","clear","dificulty","timer","remove","startTimer","endGame","winnerScreen","show","prompt","win","retryScreen","setFinalScore","narrowly","retry","removeInteractivityCards","resetValues","adjustDepth","score","depthScore","depthScoreText","setDepth","newLimit","baseTime","progress","time","addEvent","delay","progressBar","setCrop","loop","setSoundBtn","soundBtn","image","setOrigin","newMuteValue","soundManager","setMute","setTexture","create","WinnerScreen","RetryScreen","closeButton","CloseButton","eventObserver","EventObserver","getInstance","LogSceneMethodEntry","background","text","font","color","overProgressFrame","powerBy","open","registry","set","buttonId","ButtonEventHandler","handleButtonEvents","Name","eventEmitter","Events","EventEmitter","instance","event","context","emit","args","Boot","scene","start","SplashScreen","load","path","assetFolder","setBackground","loadMainMenu","callbackScope","constructor","PromptScreen","addMask","promptContent","promptType","setTitle","title","setMessage","message","setActions","actions","Footer","setSplashBackground","finalScore","finalScoreText","hide","grid","offsetX","offsetY","selectedCandy","movingCandiesInProcess","scoreGoal","totalTime","gameState","spritesheet","frameWidth","frameHeight","getCandyPosition","row","col","CANDY_WIDTH","CANDY_HEIGHT","scale","gridHeight","candyType","Between","candy","createCandy","matches","getMatches","console","log","removeMatches","delayedCall","dropCandies","refillGrid","setData","handleCandyClick","areAdjacent","c1","c2","row1","getData","col1","row2","col2","abs","prevCandy","swapCandies","Set","match","current","prev","unshift","c","from","updateScore","points","updateProgressBar","barWidth","fillStyle","fillRoundedRect","destroy","GRID_HEIGHT","aboveRow","candyAbove","initialY","newMatches","hasPossibleMoves","shuffleBoard","swapData","currentType","GRID_WIDTH","right","down","candies","setPosition","scoreImage","scoreWidth","scoreHeight","fontFamily","fontSize","fontStyle","progressFrame","graphics","progressTimer","events","Clamp","getElapsed","Preloader","svg","audio","addProgressBar","update","progressBox","fillRect","loadingText","make","style","percentText","assetText","value","parseInt","selection","document","getSelection","rangeCount","active","activeElement","ranges","getRangeAt","tagName","toUpperCase","blur","removeAllRanges","type","range","addRange","focus","buttons","eventName","exitArcor","back","copy","close","copied","data","leaving","setSplashLogo","setWinnerScore","setWinnerCouponCode","logo","couponCodeContainer","couponCode","getCouponCode","mask","gameConfig","innerWidth","AUTO","transparent","parent","Game","super","selectedCoupon","onCloseGame","onClose","getRandomCoupon","coupons","floor","random","resize","renderer","scenes","isActive","setViewport","zoomFactor","setZoom","refresh","flash","stop","newGame","options","newOptions","addEventListener","onload","queryString","location","search","URLSearchParams","deviationX","deviationY","button","Button","scrollX","scrollY","createButton","action","e","releaseButtonEffect","setTint","pressButtonEffect","Score","MainMenu","alreadyPlayignMusic","disableWebAudio","Sound","SoundManagerCreator","music","pauseScene","pause","resumeScene","resume","max","detail1","detail2","logoArcor","playButton","baseX","baseY","angle","LeavingGameScene","key","leavingScreen","promptTitle","promptMessage","promptActions","separation","index","handleCloseEvent","handleBackEvent","href","handlePlayAgain","handleCopyCode","launch","restart","isIOS","test","navigator","userAgent","copyToClipboard","debug","fallbackCopyTextToClipboard","textArea","createElement","left","body","appendChild","select","execCommand","err","error","removeChild","code","Log","Date","toISOString","sceneName","method","deselectCurrent","clipboardToIE11Formatting","reselectPrevious","mark","success","createRange","textContent","ariaHidden","all","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","stopPropagation","format","preventDefault","clipboardData","warn","clearData","onCopy","selectNodeContents","Error","copyKey","replace","removeRange","MainSettings","startYPosition","backText","setFontFamily","setFontSize","setFill","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"sourceRoot":""}