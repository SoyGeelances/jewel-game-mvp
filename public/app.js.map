{"version":3,"file":"app.js","mappings":"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","sources":["webpack://phaser-3-aec/external var \"Phaser\"","webpack://phaser-3-aec/./src/ts/Scenes/MainGame_Memo.ts","webpack://phaser-3-aec/./src/ts/observer/EventObserver.ts","webpack://phaser-3-aec/./src/ts/Scenes/Boot.ts","webpack://phaser-3-aec/./src/ts/Scenes/SplashScreen.ts","webpack://phaser-3-aec/./src/ts/components/Score.ts","webpack://phaser-3-aec/./src/ts/Screen/RetryScreen.ts","webpack://phaser-3-aec/./src/ts/Screen/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/MainGame_Candy.ts","webpack://phaser-3-aec/./src/ts/Scenes/Preloader.ts","webpack://phaser-3-aec/./src/ts/config/config.ts","webpack://phaser-3-aec/./src/ts/Screen/WinnerScreen.ts","webpack://phaser-3-aec/./src/ts/Screen/Screen.ts","webpack://phaser-3-aec/./src/ts/Game.ts","webpack://phaser-3-aec/./src/ts/components/CloseButton.ts","webpack://phaser-3-aec/./src/ts/components/Footer.ts","webpack://phaser-3-aec/./src/ts/components/Button.ts","webpack://phaser-3-aec/./src/ts/components/index.ts","webpack://phaser-3-aec/./src/ts/observer/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/MainMenu.ts","webpack://phaser-3-aec/./src/ts/components/LevelUpScreen.ts","webpack://phaser-3-aec/./src/ts/handlers/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/LeavingGameScene.ts","webpack://phaser-3-aec/./src/ts/Screen/PromptScreen.ts","webpack://phaser-3-aec/./src/ts/handlers/ButtonEventHandler.ts","webpack://phaser-3-aec/./src/ts/Utilities.ts","webpack://phaser-3-aec/./src/ts/config/index.ts","webpack://phaser-3-aec/./src/ts/Scenes/MainSettings.ts","webpack://phaser-3-aec/webpack/bootstrap","webpack://phaser-3-aec/webpack/startup"],"sourcesContent":["module.exports = Phaser;","import Utilities from \"../Utilities\";\nimport { WinnerScreen, RetryScreen } from '../Screen';\nimport { prompt } from '../config';\nimport { CloseButton } from '../components';\nimport { EventObserver } from \"../observer\";\nimport { ButtonEventHandler } from \"../handlers\";\n\nexport type LevelConfig = {\n\ttilesRow: number;\n\ttilesColumn: number;\n};\n\nexport default class MainGame extends Phaser.Scene {\n\twinnerScreen: WinnerScreen;\n\tretryScreen: RetryScreen;\n\tcloseButton: CloseButton;\n\teventObserver: EventObserver;\n\tgroup: Phaser.GameObjects.Group;\n\tscore: Phaser.GameObjects.Image;\n\tscoreText: Phaser.GameObjects.Text;\n\twithPreview = true;\n\twithRestartTime = true;\n\ttimer: Phaser.Time.TimerEvent;\n\tprogressBar: Phaser.GameObjects.Image;\n\tscoreValue = 0;\n\temptyGroup: Phaser.GameObjects.Group;\n\tresizeApplied = false;\n\tcellSizeX = 80;\n\tcellSizeY = 80;\n\tflipSpeed = 200;\n\tflipZoom = 1.05;\n\tlimitTime = 10* 1000;\n\tmaxTime = 60 * 1000;\n\tbaseScale = 0.6;\n\ttargetScore= 10000;\n\tsplitter = {\n\t\trows: 5,\n\t\tcolumns: 6,\n\t};\n\tnextLevelTimer: any = null\n\tstate = \"idle\";\n\tpreviewGoing = false;\n\tflippedCards: Phaser.GameObjects.Sprite[] = [];\n\tlevelDificulty = 1;\n\tconfigDificulty = [\n\t\t[2, 2],\n\t\t[2, 3],\n\t\t[2, 4],\n\t\t[2, 5],\n\t\t[3, 4],\n\t\t[4, 3],\n\t\t[6, 3],\n\t\t[4, 4],\n\t\t[4, 5],\n\t\t[4, 5],\n\t\t[5, 4],\n\t\t[6, 5],\n\t];\n\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"MainGame\";\n\n\tpublic init() {\n\t\tthis.resetGameState();\n\t\tif(window && window.innerHeight < 650 && !this.resizeApplied) {\n\t\t\tthis.resizeApplied = true;\n\t\t\tthis.cellSizeX = this.cellSizeX / 1.60;\n\t\t\tthis.cellSizeY = this.cellSizeY / 1.60;\n\t\t\tthis.flipZoom = this.flipZoom / 1.60;\n\t\t\tthis.baseScale = this.baseScale / 1.60;\n\t\t}\n\t}\n\n\tpublic preload(): void {\n\t\t// Preload as needed.\n\t}\n\n\tpublic exist(a: any) {\n\t\treturn a !== undefined && a !== null;\n\t}\n\n\tpublic getScoreValue() {\n\t\treturn this.scoreValue;\n\t}\n\n\tprivate resetGameState(): void {\n\t\tthis.scoreValue = 0;          // Reinicia el valor del puntaje\n\t\tthis.levelDificulty = 1;      // Vuelve al nivel 1\n\t\tthis.state = \"idle\";          // Cambia el estado del juego al inicial\n\t\tthis.previewGoing = false;    // Restablece si hay un preview activo\n\n\t}\n\n\tpublic checkMatch(): void {\n\n\t\tif (this.previewGoing) return;\n\t\tif (\n\t\t\t(this.flippedCards[0] as any).behindFrame ===\n\t\t\t(this.flippedCards[1] as any).behindFrame\n\t\t) {\n\t\t\tthis.flippedCards[0].disableInteractive();\n\t\t\tthis.flippedCards[1].disableInteractive();\n\t\t\t(this.flippedCards[0] as any).pending = false;\n\t\t\t(this.flippedCards[1] as any).pending = false;\n\n\t\t\tthis.tweens.add({\n\t\t\t\ttargets: this.flippedCards,\n\t\t\t\talpha: 0,\n\t\t\t\tduration: 500,\n\t\t\t\tyoyo: false,\n\t\t\t});\n\t\t\tif ( // chequea si no hay ninguna card dadas vueltas\n\t\t\t\tthis.group\n\t\t\t\t\t.getChildren()\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(card: Phaser.GameObjects.Sprite & any) => card.pending\n\t\t\t\t\t).length === 0 && this.nextLevelTimer == null\n\t\t\t) {\n\t\t\t\tthis.nextLevelTimer = setTimeout(() => {\n\t\t\t\t\tthis.createNextGame();\n\t\t\t\t\tclearTimeout(this.nextLevelTimer);\n\t\t\t\t\tthis.nextLevelTimer = null;\n\t\t\t\t}, 550);\n\t\t\t}\n\n\t\t\tthis.scoreValue = (Number(this.scoreValue) + 100) + (50 * this.levelDificulty);\n\t\t\tif(this.state !== \"end\") {\n\t\t\t\tthis.scoreText.setText(this.scoreValue.toString());\n\t\t\t\tthis.tweens.add({\n\t\t\t\t\ttargets: this.scoreText,\n\t\t\t\t\ty: 55 - 15,  // Hace que el texto suba\n\t\t\t\t\tscaleY: 1.2,  // Estira un poco el texto para simular el brinco\n\t\t\t\t\tduration: 200,  // Duración de la subida\n\t\t\t\t\tease: 'Power1',\n\t\t\t\t\tyoyo: true,  // Hace que vuelva a su posición original\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\t\t// Animación de caída\n\t\t\t\t\t\t\tthis.tweens.add({\n\t\t\t\t\t\t\t\t\ttargets: this.scoreText,\n\t\t\t\t\t\t\t\t\ty: 55,  // Hace que caiga un poco más abajo\n\t\t\t\t\t\t\t\t\tduration: 300,  // Duración de la caída\n\t\t\t\t\t\t\t\t\tease: 'Bounce.easeOut',  // Efecto de rebote al caer\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.sound.add('collectcoin').play();\n\t\t\t}\n\n\t\t} else {\n\t\t\tfor (let i = 0; i < this.flippedCards.length; i++) {\n\t\t\t\tconst obj = this.flippedCards[i];\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.flipTween(obj, true);\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t}\n\t\tthis.flippedCards = [];\n\t}\n\n\tpublic flipTween(\n\t\tcard: Phaser.GameObjects.Sprite & any,\n\t\tisReversed = false,\n\t\tcallback = () => null,\n\t\tcheck = true\n\t): void {\n\t\tif (!isReversed && card.isFlipping) return;\n\n\t\tif (isReversed && check) {\n\t\t\tcard.isFlipping = false;\n\t\t} else if (check) {\n\t\t\tcard.isFlipping = true;\n\t\t\tthis.flippedCards.push(card);\n\t\t}\n\t\tif(!this.game.sound.mute) this.sound.add('cardFlip', {\n\t\t\tvolume: 0.3\n\t\t}).play();\n\n\t\tthis.tweens.add({\n\t\t\ttargets: card,\n\t\t\tscaleX: 0.01,\n\t\t\tduration: this.flipSpeed / 2,\n\t\t\tyoyo: false,\n\t\t\tonComplete: () => {\n\t\t\t\tif (isReversed) card.setFrame(1);\n\t\t\t\telse card.setFrame(card.behindFrame);\n\t\t\t\tthis.tweens.add({\n\t\t\t\t\ttargets: card,\n\t\t\t\t\tscaleX: this.baseScale,\n\t\t\t\t\tduration: this.flipSpeed / 2,\n\t\t\t\t\tyoyo: false,\n\t\t\t\t\tonComplete: () => {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic makeCardInteractive(card: Phaser.GameObjects.Sprite & any): void {\n\t\tcard.setScale(this.baseScale);\n\n\t\tcard.isFlipping = false;\n\t\tif (card.frame.name != 0) {\n\t\t\tcard.setInteractive();\n\t\t\tcard.on(\"pointerdown\", () => {\n\t\t\t\tif(this.flippedCards.length < 2) {\n\t\t\t\t\tthis.flipTween(card, false, () => {\n\t\t\t\t\t\tif (!this.previewGoing && this.flippedCards.length === 2) {\n\t\t\t\t\t\t\tthis.checkMatch();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic createGrid(config: LevelConfig) {\n\t\tconst middlePoint = {\n\t\t\tx: this.cameras.main.centerX,\n\t\t\ty: this.cameras.main.centerY,\n\t\t};\n\t\tconst tilesUsed = config.tilesRow * config.tilesColumn;\n\t\tconst amountOfTiles = tilesUsed / 2;\n\n\t\tconst possibleFrames = this.textures.get(\"cards\").getFrameNames();\n\t\tpossibleFrames.shift();\n\t\tpossibleFrames.shift();\n\n\t\tconst frames = [];\n\t\tfor (let i = 0; i < amountOfTiles; i++) {\n\t\t\tconst frame = Phaser.Math.RND.pick(possibleFrames);\n\t\t\tframes.push(frame);\n\t\t\tframes.push(frame);\n\t\t}\n\t\t// *** DEBUG ***\n\t\t// console.log(\"frames\",frames)\n\t\t// const countFrames = {};\n\t\t// frames.forEach((frame) => {\n\t\t// \tif (!countFrames[frame]) countFrames[frame] = 0;\n\t\t// \tcountFrames[frame]++;\n\t\t// });\n\t\t// console.log(\"countFrames\",countFrames)\n\n\t\tthis.emptyGroup = this.add.group();\n\t\tthis.group = this.add.group();\n\n\t\t// fill the group with the cards and shuffle them, two for each frame, fill the center first and leave the sides empty\n\n\t\tPhaser.Utils.Array.Shuffle(frames);\n\n\t\tfor (let i = 0; i < this.splitter.rows * this.splitter.columns; i++) {\n\t\t\tconst card = this.add.sprite(0, 0, \"cards\", 0).setScale(this.baseScale)\n\t\t\tthis.emptyGroup.add(card);\n\t\t}\n\n\t\tfor (let i = 0; i < config.tilesRow * config.tilesColumn; i++) {\n\t\t\tconst card = this.add.sprite(0, 0, \"cards\", 0).setScale(this.baseScale)\n\t\t\tthis.group.add(card);\n\t\t}\n\n\t\tPhaser.Utils.Array.Shuffle(this.group.getChildren());\n\n\t\tfor (let i = 0; i < this.group.getChildren().length; i++) {\n\t\t\tif (i >= frames.length) break;\n\t\t\t(this.group.getChildren()[i] as Phaser.GameObjects.Sprite).setFrame(1);\n\t\t\t(this.group.getChildren()[i] as any).behindFrame = frames[i];\n\t\t\t(this.group.getChildren()[i] as any).pending = true;\n\t\t\t\n\t\t}\n\n\t\tPhaser.Actions.GridAlign(this.emptyGroup.getChildren(), {\n\t\t\twidth: this.splitter.columns,\n\t\t\theight: this.splitter.rows,\n\t\t\tcellWidth: this.cellSizeX,\n\t\t\tcellHeight: this.cellSizeY,\n\t\t\tposition: Phaser.Display.Align.CENTER,\n\t\t\tx: middlePoint.x - (this.splitter.columns * this.cellSizeX) / 2,\n\t\t\ty: middlePoint.y - (this.splitter.rows * this.cellSizeY) / 2,\n\t\t});\n\n\t\tlet correctionX = 0;\n\t\tlet correctionY = 0;\n\n\t\t// Checkear si tilesRow es impar y si config.tilesRow es impar\n\n\t\tif (\n\t\t\t(this.splitter.columns % 2 === 0 && config.tilesColumn % 2 !== 0) ||\n\t\t\t(this.splitter.columns % 2 !== 0 && config.tilesColumn % 2 === 0)\n\t\t) {\n\t\t\tcorrectionX = this.cellSizeX / 2;\n\t\t}\n\n\t\tif (\n\t\t\t(this.splitter.rows % 2 === 0 && config.tilesRow % 2 !== 0) ||\n\t\t\t(this.splitter.rows % 2 !== 0 && config.tilesRow % 2 === 0)\n\t\t) {\n\t\t\tcorrectionY = this.cellSizeY / 2;\n\t\t}\n\n\t\tPhaser.Actions.GridAlign(this.group.getChildren(), {\n\t\t\twidth: config.tilesColumn,\n\t\t\theight: config.tilesRow,\n\t\t\tcellWidth: this.cellSizeX,\n\t\t\tcellHeight: this.cellSizeY,\n\t\t\tposition: Phaser.Display.Align.CENTER,\n\t\t\tx:\n\t\t\t\tmiddlePoint.x - (config.tilesColumn * this.cellSizeX) / 2 - correctionX,\n\t\t\ty: middlePoint.y - (config.tilesRow * this.cellSizeY) / 2 - correctionY,\n\t\t});\n\t\tif (this.withPreview) {\n\t\t\tthis.previewGoing = true;\n\t\t\tthis.group.getChildren().forEach((card: any) => {\n\t\t\t\tif (card) {\n\t\t\t\t\tthis.flipTween(\n\t\t\t\t\t\tcard,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.flipTween(\n\t\t\t\t\t\t\t\t\tcard,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tif(card) {\n\t\t\t\t\t\t\t\t\t\t\tthis.makeCardInteractive(card);\n\t\t\t\t\t\t\t\t\t\t\tthis.previewGoing = false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.group\n\t\t\t\t.getChildren()\n\t\t\t\t.forEach((card: Phaser.GameObjects.Sprite & any) => {\n\t\t\t\t\tif (card) this.makeCardInteractive(card);\n\t\t\t\t});\n\t\t}\n\t}\n\n\tpublic createNextGame() {\n\t\tif (this.state === \"end\") return;\n\t\tthis.levelDificulty++;\n\t\tthis.group.clear(true, true);\n\t\tthis.emptyGroup.clear(true, true);\n\t\tif (!this.configDificulty[this.levelDificulty - 1])\n\t\t\tthis.levelDificulty = this.configDificulty.length;\n\t\tconst dificulty = this.configDificulty[this.levelDificulty - 1];\n\t\tthis.createGrid({\n\t\t\ttilesRow: dificulty[0],\n\t\t\ttilesColumn: dificulty[1],\n\t\t});\n\t\tthis.timer.remove();\n\t\tthis.startTimer();\n\t}\n\n\tpublic endGame() {\n\t\t// add gray mask over all the scene\n\t\tthis.previewGoing = false;\n\t\tthis.state = \"end\";\n\n\t\tif (this.scoreValue >= this.targetScore) {\n\t\t\tthis.winnerScreen.show(prompt.win, \"winner_screen\");\n\t\t} else if( this.scoreValue >= 6501 &&  this.scoreValue <= 9999) {\n\t\t\tconst scoreValue = this.scoreValue;\n\t\t\tthis.retryScreen.setFinalScore(scoreValue);\n\t\t\tthis.retryScreen.show(prompt.narrowly, \"prompt_screen\");\n\t\t} else if (this.scoreValue < 6501)  {\n\t\t\tconst scoreValue = this.scoreValue;\n\t\t\tthis.retryScreen.setFinalScore(scoreValue);\n\t\t\tthis.retryScreen.show(prompt.retry, \"prompt_screen\");\n\t\t};\n\n\t\t//For Test\n\n\t\t// if (this.scoreValue >= this.targetScore) {\n\t\t// \tthis.winnerScreen.show(prompt.win, \"winner_screen\");\n\t\t// \tthis.removeInteractivityCards()\n\t\t// } else if( this.scoreValue >= 2501 &&  this.scoreValue <= 2999) {\n\t\t// \tconst scoreValue = this.scoreValue;\n\t\t// \tthis.retryScreen.setFinalScore(scoreValue);\n\t\t// \tthis.retryScreen.show(prompt.narrowly, \"prompt_screen\");\n\t\t// \tthis.removeInteractivityCards()\n\t\t// } else if (this.scoreValue < 2501)  {\n\t\t// \tconst scoreValue = this.scoreValue;\n\t\t// \tthis.retryScreen.setFinalScore(scoreValue);\n\t\t// \tthis.retryScreen.show(prompt.retry, \"prompt_screen\");\n\t\t// \tthis.removeInteractivityCards()\n\t\t// };\n\t\treturn;\t\n\t}\n\n\tpublic removeInteractivityCards() {\n\t\tthis.group.getChildren().forEach((card: any) => {\n\t\t\tcard.disableInteractive();\n\t\t})\n\t}\n\n\tpublic resetValues(): void {\n \t\tthis.scoreValue = 0;\n\t\tthis.levelDificulty = 1;\n\t}\n\n\tpublic adjustDepth(score: Phaser.GameObjects.Image, scoreText: Phaser.GameObjects.Text, depthScore:number = 10, depthScoreText:number = 10): void {\n\t\tscore.setDepth(depthScore);\n\t\tscoreText.setDepth(depthScoreText);\n\t}\n\n\tpublic startTimer() {\n\t\tconst newLimit = this.limitTime + ((this.levelDificulty * 2) * 1000);\n\t\tlet baseTime = Number(newLimit);\n\t\tif( baseTime > this.maxTime) baseTime = this.maxTime;\n\t\tlet progress = 100;\n\t\tthis.timer = this.time.addEvent({\n\t\t\tdelay: 1,\n\t\t\tcallback: () => {\n\t\t\t\tbaseTime--;\n\t\t\t\tprogress = baseTime / newLimit;\n\t\t\t\t// display image full height and % over with\n\t\t\t\tif(this.progressBar) {\n\t\t\t\t\tthis.progressBar.setCrop(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tthis.progressBar.width * progress,\n\t\t\t\t\t\tthis.progressBar.height\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (baseTime <= 0) {\n\t\t\t\t\tthis.timer.remove();\n\t\t\t\t\tthis.endGame();\n\t\t\t\t}\n\t\t\t},\n\t\t\tloop: true,\n\t\t});\n\t}\n\n\tsetSoundBtn() {\n\t\tconst soundBtn = this.add.image(35, 55, this.game.sound.mute ? \"sound_off\" : \"sound_on\").setScale(0.5);\n\t\tsoundBtn.setOrigin(0.5, 0.5);\n\t\tsoundBtn.setInteractive();\n\t\tsoundBtn.on(\"pointerdown\", () => {\n\t\t\tconst newMuteValue = !this.game.sound.mute;\n\t\t\tthis.game.sound.mute = newMuteValue\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t//@ts-ignore\n\t\t\tthis.game.soundManager.setMute(newMuteValue)\n\t\t\tsoundBtn.setTexture(newMuteValue ? \"sound_off\" : \"sound_on\");\n\t\t}, this);\n\t}\n\n\tpublic create(): void {\n\t\tthis.resetGameState();\n\t\tthis.previewGoing = false;\n\t\tthis.winnerScreen = new WinnerScreen(this);\n\t\tthis.retryScreen = new RetryScreen(this);\n\t\tthis.closeButton = new CloseButton(this);\n\t\tthis.eventObserver =  EventObserver.getInstance();\n\n\t\tUtilities.LogSceneMethodEntry(\"MainGame\", \"create\");\n\n\t\tconst background = this.add.image(\n\t\t\tthis.cameras.main.centerX,\n\t\t\t0,\n\t\t\t\"background_secondary\"\n\t\t);\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.cameras.main.width / background.width);\n\t\tlet baseScale = this.cameras.main.height / background.height;\n\t\tif (this.cameras.main.width / background.width > baseScale)\n\t\t\tbaseScale = this.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale);\n\n\t\t// this.setSoundBtn();\n\n\t\tthis.closeButton.create();\n\n\t\tthis.score = this.add.image(this.cameras.main.centerX -23, 60, \"score\")\n\t\t.setScale(1.09, 1.05)\n\t\t.setOrigin(0.5, 0.5);\n\n\n\t\tthis.scoreText = this.add.text(\n\t\t\tthis.cameras.main.centerX + 100 + 20,\n\t\t\t55,\n\t\t\tthis.scoreValue.toString(),\n\t\t\t{\n\t\t\t\tfont: \"40px montserrat-memo\",\n\t\t\t\tcolor: \"#E2D64B\",\n\t\t\t}\n\t\t);\n\t\tthis.scoreText.setOrigin(1, 0.5);\n\n\t\tconst progressFrame = this.add.image(\n\t\t\tthis.cameras.main.centerX,\n\t\t\tthis.cameras.main.centerY * 2 - 60,\n\t\t\t\"progress_frame\"\n\t\t);\n\t\tprogressFrame.setOrigin(0.5, 0.5).setScale(1.12);\n\n\t\tconst overProgressFrame = this.add.image(\n\t\t\tthis.cameras.main.centerX,\n\t\t\tthis.cameras.main.centerY * 2 - 60,\n\t\t\t\"progress_bar\"\n\t\t);\n\t\toverProgressFrame.setOrigin(0.5, 0.5).setScale(1.12);\n\t\tthis.progressBar = overProgressFrame;\n\t\tthis.startTimer();\n\t\tthis.splitter.rows = 6;\n\t\tthis.splitter.columns = 5;\n\n\t\tconst dificulty = this.configDificulty[this.levelDificulty - 1];\n\n\t\tthis.createGrid({\n\t\t\ttilesRow: dificulty[0],\n\t\t\ttilesColumn: dificulty[1],\n\t\t});\n\n\t\tconst powerBy = this.add.image(\n\t\t\tthis.cameras.main.centerX * 2,\n\t\t\t(this.cameras.main.centerY * 2),\n\t\t\t\"powerBySvg\"\n\t\t);\n\t\tpowerBy.setInteractive();\n\t\tpowerBy.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\");\n\t\t});\n\t\tpowerBy.setOrigin(1, 1);\n\t\tthis.state = \"start\";\n\t\tthis.registry.set('score', this.score);\n\t\tthis.registry.set('scoreText', this.scoreText);\n\n\t\tthis.eventObserver.on('button-clicked', (buttonId) => {\n\t\t\tButtonEventHandler.handleButtonEvents(buttonId, this)\n\t\t}, this);\n\t}\n\t\n}\n","// EventObserver.ts\nexport class EventObserver {\n\tprivate static instance: EventObserver;\n\tpublic eventEmitter: Phaser.Events.EventEmitter;\n\n\tprivate constructor() {\n\t\t\tthis.eventEmitter = new Phaser.Events.EventEmitter();\n\t}\n\n\tpublic static getInstance(): EventObserver {\n\t\t\tif (!EventObserver.instance) {\n\t\t\t\t\tEventObserver.instance = new EventObserver();\n\t\t\t}\n\t\t\treturn EventObserver.instance;\n\t}\n\n\tpublic on(event: string, callback: (a: any) => void, context?: any) {\n\t\t\tthis.eventEmitter.on(event, callback, context);\n\t}\n\n\tpublic emit(event: string, ...args: any[]) {\n\t\t\tthis.eventEmitter.emit(event, ...args);\n\t}\n}\n","import Preloader from \"./Preloader\";\nimport Utilities from \"../Utilities\";\n\nexport default class Boot extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"Boot\";\n\n\tpublic preload(): void {\n\t\t// Preload as needed.\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"Boot\", \"create\");\n\n\t\tthis.scene.start(Preloader.Name);\n\t}\n}\n","import Utilities from \"../Utilities\";\nimport MainMenu from \"./MainMenu\";\n\nexport default class SplashScreen extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"SplashScreen\";\n\n\tpublic preload(): void {\n\t\tthis.load.path = window.assetFolder ?? \"assets/\";\n\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"SplashScreen\", \"create\");\n\n\t\tthis.setBackground();\n\n\t\tconst powerBy = this.add.image(this.cameras.main.centerX * 2, (this.cameras.main.centerY * 2), \"powerBySvg\");\n\t\t\n\t\tpowerBy.setOrigin(1, 1);\n\t\tpowerBy.setInteractive();\n\t\tpowerBy.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\");\n\t\t});\n\t\tthis.time.addEvent({\n\t\t\t// Run after three seconds.\n\t\t\tdelay: 1000,\n\t\t\tcallback: this.loadMainMenu,\n\t\t\tcallbackScope: this,\n\t\t\tloop: false\n\t\t});\n\t}\n\n\tpublic setBackground() {\n\t\tconst background = this.add.image(this.cameras.main.centerX,0, \"background\");\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.cameras.main.width / background.width);\n\t\tlet baseScale = this.cameras.main.height / background.height\n\t\tif((this.cameras.main.width / background.width) > baseScale) baseScale = this.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale)\n\t}\n\n\t/**\n\t * Load the next scene, the main menu.\n\t */\n\tprivate loadMainMenu(): void {\n\t\tthis.scene.start(MainMenu.Name);\n\t}\n}\n","\n\nexport class Score {\n\tscore: Phaser.GameObjects.Image;\n\tscoreText: Phaser.GameObjects.Text;\n\n  constructor( private scene: Phaser.Scene ) {\n\n    this.score = this.scene.add.image(this.scene.cameras.main.centerX -30, 60, \"score\");\n\t\tthis.score.setOrigin(0.5, 0.5);\n  }\n\n\n}\n","\nimport { Footer } from \"../components/Footer\";\nimport { promptContentConfig } from \"../types\";\nimport { PromptScreen } from \"./PromptScreen\";\n\nexport class RetryScreen  {\n  private prompt: PromptScreen;\n  private finalScore: Phaser.GameObjects.Image;\n  private finalScoreText: Phaser.GameObjects.Text;\n\n  constructor(\n    private scene: Phaser.Scene,\n  ) {\n    this.prompt = new PromptScreen(scene);\n  }\n\n  addMask() {\n    this.prompt.addMask();\n  }\n\n  show(promptContent: promptContentConfig, promptType: string) {\n    this.prompt.setBackground(promptType, 0, 0, 1.2, 1.2);\n    this.prompt.setTitle(promptContent.title, 0, -133, 1.2, 1.2);\n    this.prompt.setMessage(promptContent.message, 0, -30, 1.2, 1.2);\n    this.prompt.setActions(promptContent.actions, 0, 60, 65, 1.2, 1.2);\n    this.scene.sound.add('retry').play();\n    Footer.create(this.scene);\n  }\n\n\n  public setFinalScore(scoreValue) {\n    this.prompt.setSplashBackground();\n    this.finalScore = this.scene.add.image(this.scene.cameras.main.centerX, 60, \"final_score\")\n    .setScale(1.1, 1.1)\n    .setDepth(110)\n    .setOrigin(0.5, 0.5);\n\n    this.finalScoreText = this.scene.add.text(\n      this.scene.cameras.main.centerX + 135 + 20,\n      55,\n      scoreValue,\n      {\n        font: \"40px montserrat-memo\",\n        color: \"#E2D64B\",\n      }\n    )\n    .setDepth(110)\n    .setOrigin(1, 0.5);\n\n  }\n\n  hide(): void {\n    this.prompt.hide();\n  }\n}\n","export { WinnerScreen } from './WinnerScreen';\nexport { RetryScreen } from './RetryScreen';\nexport { PromptScreen } from './PromptScreen';\n","import Phaser from 'phaser'\nimport { WinnerScreen, RetryScreen } from '../Screen';\nimport { prompt } from '../config'\nimport { ButtonEventHandler } from '../handlers';\nimport { EventObserver } from '../observer';\nimport { CloseButton } from \"../components\";\nimport { Footer } from \"../components/Footer\";\nimport { LevelUpScreen } from \"../components/LevelUpScreen\";\n\n// GRID\nconst GRID_WIDTH = 5\nconst GRID_HEIGHT = 6\nconst CANDY_WIDTH = 116 * 0.6;\nconst CANDY_HEIGHT = 116 * 0.6;\nconst GAP = 6\nconst CANDY_FRAME_START = 1;\nconst CANDY_FRAME_END = 6;\n\n// LEVELS\nconst LEVELS = [\n  { level: 1, goal: 600, time: 42 },\n  { level: 2, goal: 1300, time: 56 },\n  { level: 3, goal: 2500, time: 64 },\n  { level: 4, goal: 3800, time: 63 },\n  { level: 5, goal: 5200, time: 70 },\n  { level: 6, goal: 6700, time: 73 },\n  { level: 7, goal: 8100, time: 74 },\n  { level: 8, goal: 10000, time: 75 }\n];\n\n\nexport default class MainGame extends Phaser.Scene {\n  public static Name = \"MainGame\"\n\n  private grid: Phaser.GameObjects.Sprite[][] = []\n  private offsetX = 0\n  private offsetY = 0\n  private selectedCandy: Phaser.GameObjects.Sprite | null = null\n  private movingCandiesInProcess = false\n  private retryScreen!: RetryScreen\n  private winnerScreen!: WinnerScreen\n  private scoreValue = 0\n  private scoreGoal = LEVELS[0].goal;\n  private scoreText!: Phaser.GameObjects.Text\n  private currentLevelIndex = 0;\n  private totalTime = LEVELS[0].time; // en segundos\n  private matchValue = 20;\n  private levelUpSound!: Phaser.Sound.BaseSound;\n  private levelUpScreen!: LevelUpScreen;\n  private swapCandySound!: Phaser.Sound.BaseSound;\n  private shuffleCandySound!: Phaser.Sound.BaseSound;\n  private comboCount = 1;\n  private comboTimer!: Phaser.Time.TimerEvent;\n  private comboThreshold = 1500; // 1.5 segundos\n  private comboText!: Phaser.GameObjects.Text;\n  private comboSound!: Phaser.Sound.BaseSound;\n\n  private progressBar!: Phaser.GameObjects.Graphics\n  private progressFrame!: Phaser.GameObjects.Image\n  private progressTimer!: Phaser.Time.TimerEvent\n  private eventObserver: EventObserver;\n  private gameState: 'playing' | 'paused' | 'ended' = 'playing';\n  private closeButton: CloseButton;\n\n  preload() {\n    this.load.image('progress-frame', 'assets/progress_bar_frame.png')\n  }\n\n  private getCandyPosition(row: number, col: number): { x: number; y: number } {\n    const x = this.offsetX + col * (CANDY_WIDTH + GAP) + CANDY_WIDTH / 2\n    const y = this.offsetY + row * (CANDY_HEIGHT + GAP) + CANDY_HEIGHT / 2\n    return { x, y }\n  }\n\n  createGrid() {\n    this.offsetX = (this.scale.width - (GRID_WIDTH * CANDY_WIDTH + (GRID_WIDTH - 1) * GAP)) / 2\n    const gridHeight = GRID_HEIGHT * CANDY_HEIGHT + (GRID_HEIGHT - 1) * GAP\n    this.offsetY = (this.scale.height - gridHeight) / 2\n\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n      this.grid[row] = []\n\n      for (let col = 0; col < GRID_WIDTH; col++) {\n        const candyType = Phaser.Math.Between(CANDY_FRAME_START, CANDY_FRAME_END);\n\n        const x = this.offsetX + col * (CANDY_WIDTH + GAP) + CANDY_WIDTH / 2\n        const y = this.offsetY + row * (CANDY_HEIGHT + GAP) + CANDY_HEIGHT / 2\n\n        const candy = this.createCandy(x, y, candyType, row, col)\n        //this.add.rectangle(x, y, 40, 40, 0x00ff00).setStrokeStyle(2, 0x000000) \n        this.grid[row][col] = candy\n      }\n    }\n\n    const matches = this.getMatches()\n    if (matches.length > 0) {\n      console.log('MATCH FOUND:', matches.length, 'caramelos')\n      this.removeMatches(matches)\n\n      this.time.delayedCall(300, () => {\n        this.dropCandies()\n        this.time.delayedCall(300, () => {\n          this.refillGrid()\n        })\n      })\n    }\n    this.comboText.setY(this.offsetY - 50);\n  }\n\nprivate createCandy(x: number, y: number, frame: number, row: number, col: number): Phaser.GameObjects.Sprite {\n  const candy = this.add.sprite(x, y, 'candies', frame).setScale(0.6);\n  candy.setData('type', frame);\n  candy.setData('row', row);\n  candy.setData('col', col);\n  candy.setInteractive();\n\n  // Eventos de drag\n  candy.on('pointerdown', (pointer: Phaser.Input.Pointer) => {\n    if (this.movingCandiesInProcess || this.gameState !== 'playing') return;\n    this.selectedCandy = candy;\n    candy.setScale(0.7); // resaltar visualmente\n    candy.setData('startX', pointer.x);\n    candy.setData('startY', pointer.y);\n  });\n\n  candy.on('pointerup', (pointer: Phaser.Input.Pointer) => {\n    if (!this.selectedCandy) return;\n\n    const dx = pointer.x - this.selectedCandy.getData('startX');\n    const dy = pointer.y - this.selectedCandy.getData('startY');\n\n    const threshold = 30; // mínima distancia para validar drag\n\n    if (Math.abs(dx) > Math.abs(dy)) {\n      // Movimiento horizontal\n      if (dx > threshold) this.trySwap('right');\n      else if (dx < -threshold) this.trySwap('left');\n    } else {\n      // Movimiento vertical\n      if (dy > threshold) this.trySwap('down');\n      else if (dy < -threshold) this.trySwap('up');\n    }\n\n    this.selectedCandy.setScale(0.6); // restaurar tamaño\n    this.selectedCandy = null;\n  });\n\n  return candy;\n}\n\nprivate trySwap(direction: 'up' | 'down' | 'left' | 'right') {\n  if (!this.selectedCandy || this.movingCandiesInProcess) return;\n\n  const row = this.selectedCandy.getData('row');\n  const col = this.selectedCandy.getData('col');\n\n  let targetRow = row;\n  let targetCol = col;\n\n  switch (direction) {\n    case 'up': targetRow--; break;\n    case 'down': targetRow++; break;\n    case 'left': targetCol--; break;\n    case 'right': targetCol++; break;\n  }\n\n  // Fuera de límites\n  if (\n    targetRow < 0 || targetRow >= GRID_HEIGHT ||\n    targetCol < 0 || targetCol >= GRID_WIDTH\n  ) return;\n\n  const neighbor = this.grid[targetRow][targetCol];\n  if (!neighbor) return;\n\n  this.swapCandies(this.selectedCandy, neighbor);\n}\n\n\n\n  private areAdjacent(c1: Phaser.GameObjects.Sprite, c2: Phaser.GameObjects.Sprite): boolean {\n    const row1 = c1.getData('row')\n    const col1 = c1.getData('col')\n    const row2 = c2.getData('row')\n    const col2 = c2.getData('col')\n\n    const isNextTo = (Math.abs(row1 - row2) === 1 && col1 === col2) ||\n                    (Math.abs(col1 - col2) === 1 && row1 === row2)\n\n    return isNextTo\n  }\n\n\n  private swapCandies(c1: Phaser.GameObjects.Sprite, c2: Phaser.GameObjects.Sprite) {\n    this.movingCandiesInProcess = true\n\n    const row1 = c1.getData('row')\n    const col1 = c1.getData('col')\n    const row2 = c2.getData('row')\n    const col2 = c2.getData('col')\n    \n    // Animación visual (puedes usar .setPosition si no quieres animar)\n    this.tweens.add({\n        targets: c1,       // El sprite que queremos mover (caramelo 1)\n        x: c2.x,           // Nueva posición en X: la del caramelo 2\n        y: c2.y,           // Nueva posición en Y: la del caramelo 2\n        duration: 200      // Tiempo que dura la animación: 200 milisegundos (0.2 segundos)\n    })\n\n    this.tweens.add({\n        targets: c2,\n        x: c1.x,\n        y: c1.y,\n        duration: 200\n    })\n    \n    // Intercambio lógico en la grilla\n    this.swapCandySound.play();\n    this.grid[row1][col1] = c2\n    this.grid[row2][col2] = c1\n\n    // Actualizar los datos de posición\n    c1.setData('row', row2)\n    c1.setData('col', col2)\n    c2.setData('row', row1)\n    c2.setData('col', col1)\n\n    this.time.delayedCall(250, () => {\n        const matches = this.getMatches()\n            if (matches.length > 0) {\n                console.log('MATCH FOUND:', matches.length, 'caramelos')\n                this.removeMatches(matches)\n\n                this.time.delayedCall(300, () => {\n                this.dropCandies()\n\n                this.time.delayedCall(300, () => {\n                    this.refillGrid()\n                })\n                })\n            } else {\n                console.log('No hay combinaciones')\n                this.tweens.add({\n                    targets: c1,\n                    x: c2.x,\n                    y: c2.y,\n                    duration: 200\n                })\n                this.tweens.add({\n                    targets: c2,\n                    x: c1.x,\n                    y: c1.y,\n                    duration: 200\n                })\n\n                // Revertir lógica en la grilla\n                this.grid[row1][col1] = c1\n                this.grid[row2][col2] = c2\n\n                // Revertir datos\n                c1.setData('row', row1)\n                c1.setData('col', col1)\n                c2.setData('row', row2)\n                c2.setData('col', col2)\n\n                this.movingCandiesInProcess = false\n            }\n    })\n  }\n\n  private getMatches(): Phaser.GameObjects.Sprite[] {\n    const matches: Set<Phaser.GameObjects.Sprite> = new Set()\n\n    // Detectar combinaciones horizontales\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        let match: Phaser.GameObjects.Sprite[] = []\n\n        for (let col = 0; col < GRID_WIDTH; col++) {\n            const current = this.grid[row][col]\n            const prev = col > 0 ? this.grid[row][col - 1] : null\n            if (!current || !prev) {\n                if (match.length >= 3) match.forEach(c => matches.add(c));\n                match = [];\n                continue;\n            }\n\n            if (current.getData('type') === prev.getData('type')) {\n                match.push(current)\n                if (match.length === 1) match.unshift(prev)\n            } else {\n                if (match.length >= 3) match.forEach(c => matches.add(c))\n                match = []\n            }\n        }\n        if (match.length >= 3) {\n            match.forEach(c => matches.add(c)) // por si hay un match al final de la fila\n        }\n    }\n\n    // Detectar combinaciones verticales\n    for (let col = 0; col < GRID_WIDTH; col++) {\n        let match: Phaser.GameObjects.Sprite[] = []\n\n        for (let row = 0; row < GRID_HEIGHT; row++) {\n            const current = this.grid[row][col]\n            const prev = row > 0 ? this.grid[row - 1][col] : null\n            if (!current || !prev) {\n                if (match.length >= 3) match.forEach(c => matches.add(c));\n                match = [];\n                continue;\n            }\n\n            if (current.getData('type') === prev.getData('type')) {\n                match.push(current)\n                if (match.length === 1) match.unshift(prev)\n            } else {\n                if (match.length >= 3) match.forEach(c => matches.add(c))\n                match = []\n                }\n        }\n        if (match.length >= 3) {\n        match.forEach(c => matches.add(c))\n        }\n    }\n\n    return Array.from(matches)\n  }\n\n  private updateScore(points: number) {\n    this.scoreValue += points\n    //console.log(\"score\",this.scoreValue);\n    this.scoreText.setText(this.scoreValue.toString())\n\n    if (this.scoreValue >= this.scoreGoal && this.gameState !== 'ended') {\n        this.progressTimer?.remove(false); \n        if (this.currentLevelIndex === LEVELS.length - 1) {\n            this.endGame(); // nivel final\n        } else {\n            this.nextLevel(); // avanzar al siguiente\n        }\n    }\n  }\n\n  private updateProgressBar(progress: number) {\n    const barWidth = 320\n    const barHeight = 29\n    const x = this.cameras.main.centerX - barWidth / 2\n    const y = this.scale.height - 86\n    const radius = 5;\n\n    this.progressBar.clear()\n\n    // Simula gradiente con color base sólido\n    this.progressBar.fillStyle(0x3dc51f, 1)\n    this.progressBar.fillRoundedRect(x, y, barWidth * progress, barHeight, radius);\n  }\n\n  private nextLevel() {\n    this.currentLevelIndex++;\n    if (this.currentLevelIndex >= LEVELS.length) {\n        this.endGame(); // WIN\n        return;\n    }\n\n    const newLevel = LEVELS[this.currentLevelIndex];\n    this.scoreGoal = newLevel.goal;\n    this.totalTime = newLevel.time;\n\n    // Pausar lógica del juego\n    this.gameState = 'paused';\n\n    // Mostrar pantalla de nivel\n    this.levelUpScreen.show(newLevel.level, newLevel.goal);\n    this.levelUpSound.play();\n    this.updateProgressBar(1);\n    console.log(`Nivel ${newLevel.level} iniciado. Meta: ${newLevel.goal}, Tiempo: ${newLevel.time}s`);\n\n    // Esperar a que se cierre el popup y luego reiniciar el timer\n    this.time.delayedCall(2700, async () => {\n        this.progressTimer?.destroy();\n\n        // Esperar a que se rellene completamente antes de continuar\n        await this.refillGrid();\n\n        this.progressTimer = this.time.addEvent({\n            delay: this.totalTime * 1000,\n            callback: () => this.endGame(),\n        });\n\n        this.gameState = 'playing';\n    });\n  }\n\n  private endGame() {\n    if (this.gameState === 'ended') return; \n    this.gameState = 'ended';\n    this.movingCandiesInProcess = false\n\n    this.progressTimer?.remove(false);\n\n    if (this.scoreValue >= this.scoreGoal) {\n        this.winnerScreen.show(prompt.win, \"winner_screen\");\n        console.log('WIN');\n    } else {\n        console.log('ELSE');\n        this.retryScreen.setFinalScore(this.scoreValue);\n        this.retryScreen.show(prompt.retry, \"prompt_screen\");\n    }\n  }\n\n  private removeMatches(matches: Phaser.GameObjects.Sprite[]) {\n    // Calcular Combos\n    const basePoints = matches.length * 10;\n    const points = basePoints * this.comboCount;\n    console.log(\"basePoints: \", basePoints);\n    console.log(\"this.comboCount: \", this.comboCount);\n    console.log(\"combo points: \", points);\n    this.updateScore(points);\n\n    // Mostrar texto de combo si es mayor a x1\n    if (this.comboCount > 1 && this.gameState === 'playing') {\n        this.comboSound.play();\n        this.showComboText(`x${this.comboCount}`);\n    }\n    this.comboCount++;\n\n    // Reiniciar el temporizador de combo\n    if (this.comboTimer) this.comboTimer.remove();\n\n    this.comboTimer = this.time.delayedCall(this.comboThreshold, () => {\n        this.comboCount = 1;\n    });\n\n    // Eliminar los caramelos del grid\n    matches.forEach(candy => {\n        const row = candy.getData('row');\n        const col = candy.getData('col');\n        candy.destroy();\n        this.grid[row][col] = null;\n    });\n }\n\n  private showComboText(text: string) {\n    this.comboText.setText(text);\n    this.comboText.setAlpha(1);\n    this.comboText.setScale(1);\n    this.comboText.y = this.offsetY - 50;\n\n    this.tweens.add({\n        targets: this.comboText,\n        y: this.offsetY - 80,\n        alpha: 0,\n        duration: 800,\n        ease: 'Cubic.easeOut'\n    });\n  }\n\n  private dropCandies() {\n    if (this.gameState !== 'playing') return;\n    for (let col = 0; col < GRID_WIDTH; col++) {\n        for (let row = GRID_HEIGHT - 1; row >= 0; row--) {\n            if (this.grid[row][col] === null) {\n                // Buscar el caramelo más cercano arriba\n                for (let aboveRow = row - 1; aboveRow >= 0; aboveRow--) {\n                const candyAbove = this.grid[aboveRow][col]\n                    if (candyAbove) {\n                        // Moverlo visualmente\n                        const { x, y } = this.getCandyPosition(row, col)\n                        this.tweens.add({\n                        targets: candyAbove,\n                        y: y,\n                        duration: 200\n                        })\n\n                        // Actualizar datos\n                        this.grid[row][col] = candyAbove\n                        candyAbove.setData('row', row)\n\n                        this.grid[aboveRow][col] = null\n                        break\n                    }\n                }\n            }\n        }\n    }\n  }\n\n  private refillGrid(): Promise<void> {\n    return new Promise((resolve) => {\n        if (this.gameState !== 'playing' && this.gameState !== 'paused') return resolve();\n\n        for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n            if (!this.grid[row][col]) {\n                const candyType = Phaser.Math.Between(CANDY_FRAME_START, CANDY_FRAME_END);\n                const { x, y } = this.getCandyPosition(row, col)\n                const initialY = y - 2 * (CANDY_HEIGHT + GAP)\n\n                const candy = this.createCandy(x, y, candyType, row, col);\n                candy.y = initialY;\n\n                this.tweens.add({\n                targets: candy,\n                y: y,\n                duration: 300\n                });\n\n                this.grid[row][col] = candy;\n            }\n        }\n        }\n\n        this.time.delayedCall(350, async () => {\n        const newMatches = this.getMatches()\n        if (newMatches.length > 0) {\n            this.removeMatches(newMatches)\n            this.time.delayedCall(300, () => {\n            this.dropCandies()\n            this.time.delayedCall(300, async () => {\n                await this.refillGrid()\n                resolve()\n            })\n            })\n        } else {\n            if (!this.hasPossibleMoves()) {\n            this.showShuffleMessage()\n            this.shuffleCandySound.play()\n            this.shuffleBoard()\n            this.time.delayedCall(200, async () => {\n                await this.refillGrid()\n                resolve()\n            })\n            } else {\n            this.movingCandiesInProcess = false\n            resolve()\n            }\n        }\n        })\n    })\n  }\n\n\n  private swapData(c1: Phaser.GameObjects.Sprite, c2: Phaser.GameObjects.Sprite) {\n    const row1 = c1.getData('row')\n    const col1 = c1.getData('col')\n    const row2 = c2.getData('row')\n    const col2 = c2.getData('col')\n\n    this.grid[row1][col1] = c2\n    this.grid[row2][col2] = c1\n\n    c1.setData('row', row2)\n    c1.setData('col', col2)\n    c2.setData('row', row1)\n    c2.setData('col', col1)\n  }\n\n  private hasPossibleMoves(): boolean {\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n        const current = this.grid[row][col]\n        const currentType = current.getData('type')\n\n        // Verificamos derecha\n        if (col < GRID_WIDTH - 1) {\n            const right = this.grid[row][col + 1]\n            if (right.getData('type') !== currentType) {\n            this.swapData(current, right)\n            const matches = this.getMatches()\n            this.swapData(current, right) // revertir\n            if (matches.length > 0) return true\n            }\n        }\n\n        // Verificamos abajo\n        if (row < GRID_HEIGHT - 1) {\n            const down = this.grid[row + 1][col]\n            if (down.getData('type') !== currentType) {\n            this.swapData(current, down)\n            const matches = this.getMatches()\n            this.swapData(current, down) // revertir\n            if (matches.length > 0) return true\n            }\n        }\n        }\n    }\n    return false\n  }\n\n  private shuffleBoard() {\n    const maxAttempts = 20; // evitar bucle infinito\n    let attempts = 0;\n\n    const candies: Phaser.GameObjects.Sprite[] = [];\n\n    for (let row = 0; row < GRID_HEIGHT; row++) {\n        for (let col = 0; col < GRID_WIDTH; col++) {\n            const candy = this.grid[row][col];\n            if (candy) candies.push(candy);\n        }\n    }\n\n    if (candies.length !== GRID_WIDTH * GRID_HEIGHT) {\n        console.warn('⚠️ Grilla incompleta antes de barajar. Se completará.');\n        this.refillGrid();\n        return;\n    }\n\n    let hasMoves = false;\n\n    do {\n        Phaser.Utils.Array.Shuffle(candies);\n\n        let i = 0;\n        for (let row = 0; row < GRID_HEIGHT; row++) {\n            for (let col = 0; col < GRID_WIDTH; col++) {\n                const candy = candies[i++];\n                const { x, y } = this.getCandyPosition(row, col);\n\n                candy.setPosition(x, y);\n                candy.setData('row', row);\n                candy.setData('col', col);\n                this.grid[row][col] = candy;\n            }\n        }\n\n        hasMoves = this.hasPossibleMoves();\n        attempts++;\n    } while (!hasMoves && attempts < maxAttempts);\n\n    if (!hasMoves) {\n        console.warn(\"🔁 No se pudieron generar jugadas después de múltiples intentos.\");\n        this.showShuffleMessage();\n    }\n }\n\n\n  private showShuffleMessage() {\n    const width = this.scale.width;\n    const height = this.scale.height;\n\n    const bg = this.add.rectangle(\n        width / 2,\n        height / 2,\n        width * 0.8,     // Ancho en porcentaje\n        60,              // Alto \n        0x002340,        // Color \n        0.95             // Opacidad\n    ).setOrigin(0.5).setDepth(10);\n\n    const text = this.add.text(\n        width / 2,\n        height / 2,\n        'No hay jugadas disponibles',\n        {\n        fontSize: '20px',\n        color: '#ffffff',\n        fontFamily: 'montserrat-memo',\n        }\n    ).setOrigin(0.5).setDepth(11)\n\n    this.time.delayedCall(1200, () => {\n        bg.destroy()\n        text.destroy()\n    })\n  }\n\n  init(data: { levelIndex: number; score: number }) {\n    this.currentLevelIndex = data.levelIndex ?? 0;\n    this.scoreValue = data.score ?? 0;\n\n    const level = LEVELS[this.currentLevelIndex];\n    this.scoreGoal = level.goal;\n    this.totalTime = level.time;\n  }\n\n\n  create() {\n    this.gameState = 'playing';\n    this.closeButton = new CloseButton(this);\n    this.retryScreen = new RetryScreen(this)\n    this.winnerScreen = new WinnerScreen(this)\n    this.eventObserver = EventObserver.getInstance();\n    this.levelUpScreen = new LevelUpScreen(this);\n    this.levelUpSound = this.sound.add(\"level_up\", { volume: 0.6, loop: false, });\n    this.swapCandySound = this.sound.add(\"swap_candy\");\n    this.shuffleCandySound = this.sound.add(\"shuffle_candies\");\n    this.comboSound = this.sound.add(\"combo_sound\");\n    this.comboText = this.add.text(this.cameras.main.centerX, this.scale.height / 2, '', {\n    font: '48px montserrat-memo',\n    color: '#FFD700',\n    fontStyle: 'bold'\n    })\n    .setOrigin(0.5)\n    .setAlpha(0)\n    .setDepth(999);\n\n    const scoreImage = this.add.image(20, 16, 'score').setOrigin(0, 0)\n    const scoreWidth = scoreImage.width;\n    const scoreHeight = scoreImage.height;\n\n    this.scoreText = this.add.text(20 + scoreWidth - 30, 17 + scoreHeight / 2, '0', {\n        fontFamily: 'montserrat-memo',\n        fontSize: '40px',\n        color: '#FEC647',\n        fontStyle: 'bold',\n    })\n    .setOrigin(1, 0.5)\n\n    this.progressFrame = this.add.image(this.cameras.main.centerX, this.scale.height - 68, 'progress-frame').setOrigin(0.5)\n    this.progressBar = this.add.graphics()\n    this.updateProgressBar(1)\n\n    this.progressTimer = this.time.addEvent({\n      delay: this.totalTime * 1000,\n\n      callback: () => {\n        this.endGame()\n        console.log('Tiempo terminado')\n        console.log('scoreValue: ', this.scoreValue )\n      }\n    })\n\n    this.events.on('update', () => {\n      const progress = Phaser.Math.Clamp(1 - this.progressTimer.getElapsed() / this.progressTimer.delay, 0, 1)\n      this.updateProgressBar(progress)\n    })\n\n    this.closeButton.create();\n\tthis.eventObserver.on('button-clicked', (buttonId) => {\n\t\tButtonEventHandler.handleButtonEvents(buttonId, this)\n\t}, this);\n\n    Footer.create(this);\n    this.createGrid()\n  }\n\n  public getScoreValue(): string {\n    return this.scoreValue.toString();\n  }\n}\n","import SplashScreen from \"./SplashScreen\";\nimport Utilities from \"../Utilities\";\n\nexport default class Preloader extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"Preloader\";\n\n\tpublic preload(): void {\n\n\t\tthis.load.path = window.assetFolder ?? \"assets/\";\n\t\tthis.load.spritesheet('diamonds', 'diamonds32x24x5.png', { frameWidth: 32, frameHeight: 24 });\n\t\tthis.load.spritesheet(\"cards\", \"spritesheet_cards_2x_new.png\", { frameWidth: 58 * 2, frameHeight: 58 * 2 });\n        this.load.spritesheet('candies', 'spritesheet_cards_candy.png', { frameWidth: 116, frameHeight: 116 })\n        this.load.spritesheet('candies_logo', 'spritesheet_cards_candy_logo.png', { frameWidth: 116, frameHeight: 116 })\n\n\t\tthis.load.image(\"progress_frame\", \"progress_bar_frame.png\");\n\t\tthis.load.image(\"progress_bar\", \"progress_bar_full.png\");\n\t\t//this.load.image(\"powerBy\", \"powerBy_w.png\");\n\t\tthis.load.svg(\"powerBySvg\", \"powerBy_w.svg\", {width:400, height:30, scale: 1});\n\t\tthis.load.svg(\"tevas_title\", \"tevas_title.svg\");\n\t\tthis.load.svg(\"retry_button\", \"retry_button.svg\");\n\n\t\tthis.load.image(\"phaser_pixel_medium_flat\");\n\t\tthis.load.image(\"background\", \"background.png\");\n        this.load.image(\"background_main\", \"background_main.png\");\n        this.load.image('prompt_bg', 'background_main.png');\n\t\t\n\t\tthis.load.image(\"sound_off\", \"sound_off.png\");\n\t\tthis.load.image(\"sound_on\", \"sound_on.png\");\n\t\t\n\t\tthis.load.image(\"score\", \"frame-score.png\");\n\t\tthis.load.image(\"final_score\", \"final_score.png\");\n\t\tthis.load.image(\"prompt_screen\", \"prompt_screen.png\");\n\t\tthis.load.image(\"retry_message\", \"cada-vez-mas-cerca.png\");\n\t\tthis.load.image(\"close_button\", \"close.png\");\n\t\t// this.load.image(\"retry_button\", \"retry-btn.png\");\n\t\tthis.load.image(\"seguiintentando_title\", \"segui-intentando.png\");\n\t\tthis.load.image(\"porpoco_title\", \"porpoco_title.png\");\n\t\tthis.load.image(\"exit_arcor_button\", \"ir_a_tienda.png\");\n\t\tthis.load.image(\"winner_screen\", \"win_screen.png\");\n\t\tthis.load.image(\"win_title\", \"win_title.png\");\n\t\tthis.load.image(\"win_message\", \"win_message.png\");\n\t\tthis.load.image(\"background_secondary\", \"background_secondary.png\");\n\t\t// this.load.image(\"tevas_title\", \"tevas_title.png\");\n\t\tthis.load.image(\"tevas_message\", \"tevas_message.png\");\n\t\tthis.load.image(\"tevas_button\", \"tevas_button.png\");\n\t\tthis.load.image(\"copy_coupon_button\", \"copy_coupon_button.png\");\n\t\tthis.load.image(\"copied_coupon_button\", \"copied_button.png\");\n\t\tthis.load.image(\"coupon_code_container\", \"coupon_code_container.png\");\n\n\t\tthis.load.image(\"logo_candy_Arcor\", \"logo-candy-arcor.png\");\n        this.load.image(\"logo_candy_Arcor_win\", \"logo_candy_Arcor_win.png\");\n        this.load.image(\"logo_Arcor\", \"logo-arcor-en-casa.png\");\n\t\tthis.load.image(\"logo\", \"logo-home.png\");\t\n\t\tthis.load.image(\"play\", \"play.png\");\t\n\t\tthis.load.image(\"reset\", \"reset_2x.png\");\t\n\t\tthis.load.image(\"Phaser-Logo-Small\");\n\n\t\tthis.load.audio(\"music\", \"music.mp3\");\n\t\tthis.load.audio(\"coinsplash\", \"coinsplash.mp3\");\n\t\tthis.load.audio(\"collectcoin\", \"collectcoin.mp3\");\n\t\tthis.load.audio(\"tadaa\", \"tadaa.mp3\");\n\t\tthis.load.audio(\"retry\", \"retry.mp3\");\n\t\tthis.load.audio(\"cash\", \"cash-register.mp3\");\n\t\tthis.load.audio(\"cardFlip\", \"cardFlip.wav\");\n        this.load.audio(\"level_up\", \"level-up.mp3\");\n\t\tthis.load.audio(\"swap_candy\", \"swap-candy.mp3\");\n        this.load.audio(\"shuffle_candies\", \"shuffle_candies.mp3\")\n        this.load.audio(\"combo_sound\", \"combo_sound.mp3\")\n\n\t\t// You should remove this logic; this is only included here to show off the progress bar.\n\n\t}\n\n\tpublic init(): void {\n\t\tthis.addProgressBar();\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"Preloader\", \"create\");\n\n\t\tthis.scene.start(SplashScreen.Name);\n\n\t\tconst background = this.add.image(this.cameras.main.centerX,0, \"background\");\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.cameras.main.width / background.width);\n\t\tlet baseScale = this.cameras.main.height / background.height\n\t\tif((this.cameras.main.width / background.width) > baseScale) baseScale = this.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale)\n\n\t\tconst powerBy = this.add.image(this.cameras.main.centerX, this.cameras.main.centerY * 2, \"powerBy\");\n\t\tpowerBy.setInteractive();\n\t\tpowerBy.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\");\n\t\t});\n\t\tpowerBy.setOrigin(0.5, 1).setScale(1.15 / 3);\n\n\t}\n\n\tpublic update(): void {\n\t\t// preload handles updates to the progress bar, so nothing should be needed here.\n\t}\n\n\t/**\n\t * Adds a progress bar to the display, showing the percentage of assets loaded and their name.\n\t */\n\tprivate addProgressBar(): void {\n\t\tconst width = this.cameras.main.width;\n\t\tconst height = this.cameras.main.height;\n\t\t/** Customizable. This text color will be used around the progress bar. */\n\t\tconst outerTextColor = '#ffffff';\n\n\t\tconst progressBar = this.add.graphics();\n\t\tconst progressBox = this.add.graphics();\n\t\tprogressBox.fillStyle(0x009FAF, 0.8);\n\t\tprogressBox.fillRect(width / 4, height / 2 - 30, width / 2, 50);\n\t\tprogressBox.setDepth(110);\n\t\tprogressBar.setDepth(110);\n\t\t\n\t\tconst loadingText = this.make.text({\n\t\t\tx: width / 2,\n\t\t\ty: height / 2 - 50,\n\t\t\ttext: \"Cargando\",\n\t\t\tstyle: {\n\t\t\t\tfont: \"20px montserrat-memo\",\n\t\t\t\tcolor: \"#E2D64B\"\n\t\t\t}\n\t\t});\n\t\tloadingText.setOrigin(0.5, 0.5);\n\t\tloadingText.setDepth(110);\n\n\t\tconst percentText = this.make.text({\n\t\t\tx: width / 2,\n\t\t\ty: height / 2 - 5,\n\t\t\ttext: \"0%\",\n\t\t\tstyle: {\n\t\t\t\tfont: \"18px montserrat-memo\",\n\t\t\t\tcolor: \"#E2D64B\"\n\t\t\t}\n\t\t});\n\t\tpercentText.setOrigin(0.5, 0.5);\n\t\tpercentText.setDepth(110);\n\n\t\tconst assetText = this.make.text({\n\t\t\tx: width / 2,\n\t\t\ty: height / 2 + 50,\n\t\t\ttext: \"\",\n\t\t\tstyle: {\n\t\t\t\tfont: \"18px monospace\",\n\t\t\t\tcolor: outerTextColor\n\t\t\t}\n\t\t});\n\n\t\tassetText.setOrigin(0.5, 0.5);\n\t\tassetText.setDepth(110);\n\n\t\tthis.load.on(\"progress\", (value: number) => {\n\t\t\tpercentText.setText(parseInt(value * 100 + \"\", 10) + \"%\");\n\t\t\tprogressBar.clear();\n\t\t\tprogressBar.fillStyle(0x02055, 1); \n\t\t\tprogressBar.fillRect((width / 4) + 10, (height / 2) - 30 + 10, (width / 2 - 10 - 10) * value, 30);\n\t\t});\n\n\t\t// this.load.on(\"fileprogress\", (file: Phaser.Loader.File) => {\n\t\t// \tassetText.setText(\"Loading asset: \" + file.key);\n\t\t// });\n\n\t\tthis.load.on(\"complete\", () => {\n\t\t\tprogressBar.destroy();\n\t\t\tprogressBox.destroy();\n\t\t\tloadingText.destroy();\n\t\t\tpercentText.destroy();\n\t\t\tassetText.destroy();\n\t\t});\n\t}\n}\n","const buttons = { \n\n  retry: {\n    eventName: 'retry',\n    background: \"retry_button\"\n  },\n  exitArcor: {\n    eventName: 'exit',\n    background: \"exit_arcor_button\"\n  },\n  back: {\n    eventName: 'back',\n    background: \"tevas_button\"\n  },\n  copy: {\n    eventName: 'copy',\n    background: \"copy_coupon_button\"\n  },\n  close: {\n    eventName: 'close',\n    background: \"close_button\"\n  },\n  copied: {\n    eventName: 'copy',\n    background: \"copied_coupon_button\"\n  }\n}\n\nconst prompt = {\n\n  retry: {\n    title: \"seguiintentando_title\",\n    message: \"retry_message\",\n    actions: [\n      buttons.retry,\n      buttons.exitArcor\n    ],\n    data: {}\n  },\n  narrowly: {\n    title: \"porpoco_title\",\n    message: \"retry_message\",\n    actions: [\n      buttons.retry,\n      buttons.exitArcor\n    ],\n    data: {}\n  },\n  win: {\n    title: \"win_title\",\n    message: \"win_message\",\n    actions: [\n      buttons.copy,\n      buttons.exitArcor\n    ],\n    data: {}\n  },\n  leaving: {\n    title: \"tevas_title\",\n    message:\"tevas_message\",\n    actions: [\n      buttons.back,\n      buttons.exitArcor\n    ],\n    data: {}\n  }\n}\n\nexport {\n  prompt,\n  buttons\n}\n\n\n","\nimport { Footer } from \"../components/Footer\";\nimport { promptContentConfig } from \"../types\";\nimport { PromptScreen } from \"./PromptScreen\";\nimport { EventObserver } from \"../observer\";\nimport { buttons } from \"../config\";\n\nexport class WinnerScreen  {\n  private scene;\n  private prompt: PromptScreen;\n  public couponCode: Phaser.GameObjects.Text;\n  private couponCodeContainer: Phaser.GameObjects.Image;\n  private arcorCoin: Phaser.GameObjects.Image;\n  private finalScore: Phaser.GameObjects.Text;\n  eventObserver: EventObserver;\n\n  constructor( scene: Phaser.Scene ) {\n    this.prompt = new PromptScreen(scene);\n    this.scene = scene;\n    this.eventObserver = EventObserver.getInstance();\n  }\n\n  show(promptContent: promptContentConfig, promptType: string) {\n    this.scene.closeButton.destroy();\n    this.prompt.setSplashBackground();\n    this.setSplashLogo();\n    this.prompt.setBackground(promptType, 0, 80, 1.1, 1.1); \n    this.prompt.setTitle(promptContent.title, 0, -90, 1.1, 1.1);\n    this.setWinnerScore();\n    this.prompt.setMessage(promptContent.message, 0, 60, 1.1, 1.1);\n    this.setWinnerCouponCode();\n    this.prompt.setActions(promptContent.actions, 0, 190, 60, 1.1, 1.1);\n    this.scene.sound.add('tadaa').play({\n      volume: 0.3\n    });\n    //this.scene.removeInteractivityCards(); solo para memo\n    Footer.create(this.scene);\n\n    this.eventObserver.on('button-clicked', (buttonId) => {\n\t\tif (buttonId == 'copy') {\n            this.prompt.setActions([ buttons.copied ], 0, 190, 60, 1.1, 1.1);\n        }\n\n        setTimeout(() => {\n            this.prompt.setActions([ buttons.copy ], 0, 190, 60, 1.1, 1.1);\n        }, 1500);\n\t}, this);\n  }\n\n  private setSplashLogo() {\n    const logo = this.scene.add.image(\n      this.scene.cameras.main.centerX, \n      this.scene.cameras.main.centerY - 235, \n      \"logo_candy_Arcor_win\"\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(0)\n\n    this.scene.tweens.add({\n\t\t\ttargets: logo,\n\t\t\tscale: 0.8,\n\t\t\tdelay:0,\n\t\t\tduration: 10,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n  }\n\n  private setWinnerCouponCode() {\n    this.couponCodeContainer = this.scene.add.image(\n        this.scene.cameras.main.centerX, \n        this.scene.cameras.main.centerY + 130, \n        \"coupon_code_container\"\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);\n\n    this.couponCode = this.scene.add.text(\n      this.scene.cameras.main.centerX, \n      this.scene.cameras.main.centerY + 125,\n      this.scene.game.getCouponCode(),\n      {\n          font: \"20px montserrat-memo\",\n          color: \"#FFFFFF\",\n      }\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);\n\n    this.scene.tweens.add({\n      targets: this.couponCode,\n      y: this.couponCode.y - 30,  // Hace que el texto suba\n      scaleY: 1.2,  // Estira un poco el texto para simular el brinco\n      duration: 200,  // Duración de la subida\n      ease: 'Power1',\n      yoyo: true,  // Hace que vuelva a su posición original\n      onComplete: () => {\n          // Animación de caída\n          this.scene.tweens.add({\n              targets: this.couponCode,\n              y: this.scene.cameras.main.centerY + 128,  // Hace que caiga un poco más abajo\n              duration: 30,  // Duración de la caída\n              ease: 'Bounce.easeOut',  // Efecto de rebote al caer\n          });\n      }\n    });\n  }\n\n  private setWinnerScore() {\n    /*this.arcorCoin = this.scene.add.image(\n        this.scene.cameras.main.centerX - 75,\n        this.scene.cameras.main.centerY - 10,\n        \"arcor_coin\"\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);*/\n\n    this.finalScore = this.scene.add.text(\n      this.scene.cameras.main.centerX,\n      this.scene.cameras.main.centerY - 15,\n      this.scene.getScoreValue(),\n      {\n          font: \"40px montserrat-memo\",\n          color: \"#E2D64B\",\n      }\n    )\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(1.1, 1.1);\n\n    /*this.scene.tweens.add({\n      targets: this.arcorCoin,\n      scaleX: 0, // Achica la moneda en su eje X\n      duration: 500, // Duración de la primera mitad del giro\n      yoyo: true, // Hace que el tween vuelva a su estado original\n      repeat: -1, // Repetir indefinidamente\n      ease: 'Sine.easeInOut', // Tipo de easing\n      onUpdate: () => {\n          // Cambia el frame de la moneda en el punto medio de la animación (cuando scaleX llega a 0)\n          if (this.arcorCoin.scaleX === 0) {\n              // Aquí podrías cambiar la imagen o el frame si quieres\n          }\n      }\n    });*/\n    \n  }\n\n  hide(): void {\n    this.prompt.hide();\n  }\n}\n","\nexport default abstract class Screen {\n  scene: Phaser.Scene;\n  private playButton: Phaser.GameObjects.Image;\n\n  constructor(scene: Phaser.Scene) {\n      this.scene = scene;\n  }\n\n  abstract show(): void;\n\n  abstract hide(): void;\n\n  protected setSplashBackground() {\n    const background = this.scene.add.image(this.scene.cameras.main.centerX,0, \"background_secondary\");\n\t\tbackground.setOrigin(0.5, 0);\n\t\tbackground.setScale(this.scene.cameras.main.width / background.width);\n\t\tlet baseScale = this.scene.cameras.main.height / background.height\n\t\tif((this.scene.cameras.main.width / background.width) > baseScale) baseScale = this.scene.cameras.main.width / background.width;\n\t\tbackground.setScale(baseScale)\n  }\n\n  protected addMask(): void {\n    const mask = this.scene.add.graphics();\n    mask.fillStyle(0x000000, 0.5);\n    mask.fillRect(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height);\n    mask.setDepth(3);\n  }\n\n\n  protected adjustDepth(score: Phaser.GameObjects.Image, scoreText: Phaser.GameObjects.Text, depthScore:number = 10, depthScoreText:number = 10): void {\n\t\tscore.setDepth(depthScore);\n\t\tscoreText.setDepth(depthScoreText);\n\t}\n}\n","import 'phaser';\nimport Boot from \"./Scenes/Boot\";\nimport Preloader from \"./Scenes/Preloader\";\nimport MainMenu from \"./Scenes/MainMenu\";\nimport SplashScreen from \"./Scenes/SplashScreen\";\nimport Utilities from \"./Utilities\";\nimport MainGameJewel from \"./Scenes/MainGame_Jewel\";\nimport MainGameCandy from \"./Scenes/MainGame_Candy\";\nimport MainGameMemo from \"./Scenes/MainGame_Memo\";\nimport MainSettings from \"./Scenes/MainSettings\";\nimport LeavingGameScene from \"./Scenes/LeavingGameScene\";\n\nconst gameConfig: Phaser.Types.Core.GameConfig = {\n\twidth: 400 > window.innerWidth ? window.innerWidth : 400,\n\theight: window.innerHeight,\n\ttype: Phaser.AUTO,\n\ttransparent: true,\n\tparent: \"content\",\n\ttitle: \"Juego Candy para Arcor\"\n};\n\nexport default class Game extends Phaser.Game {\n\tonCloseGame?: () => void;\n\tselectedCoupon: string = 'PRIMAVERA-5U5Y5';\n\n\tconstructor(config: Phaser.Types.Core.GameConfig & PhaserGameOptions) {\n\t\tUtilities.LogSceneMethodEntry(\"Game\", \"constructor\");\n\t\tsuper(config);\n\t\tthis.onCloseGame = config.onClose;\n\t\tthis.scene.add(Boot.Name, Boot);\n\t\tthis.scene.add(Preloader.Name, Preloader);\n\t\tthis.scene.add(SplashScreen.Name, SplashScreen);\n\t\tthis.scene.add(MainMenu.Name, MainMenu);\n\t\t//this.scene.add(MainGameJewel.Name, MainGameJewel);\n        this.scene.add(MainGameCandy.Name, MainGameCandy);\n\t\t//this.scene.add(MainGameMemo.Name, MainGameMemo);\n\t\tthis.scene.add(LeavingGameScene.Name, LeavingGameScene);\n\t\tthis.scene.add(MainSettings.Name, MainSettings);\n\t\tthis.scene.start(Boot.Name);\n\t\tthis.selectedCoupon = this.getRandomCoupon();\n\t}\n\n\tpublic getRandomCoupon() {\n\t\tconst coupons = [\n\t\t\t'PRIMAVERA-096JB', 'PRIMAVERA-1YPLD', 'PRIMAVERA-2HBCV', 'PRIMAVERA-307TT',\n\t\t\t'PRIMAVERA-4WXTB', 'PRIMAVERA-5U5Y5', 'PRIMAVERA-60ASF', 'PRIMAVERA-7P6DY',\n\t\t\t'PRIMAVERA-8S8FJ4', 'PRIMAVERA-94X04'\n\t\t];\n    const randomIndex = Math.floor(Math.random() * coupons.length);\n    return coupons[randomIndex];\n\t}\n\n\tpublic getCouponCode() {\n\t\treturn this.selectedCoupon;\n\t}\n}\n\n/**\n * Workaround for inability to scale in Phaser 3.\n * From http://www.emanueleferonato.com/2018/02/16/how-to-scale-your-html5-games-if-your-framework-does-not-feature-a-scale-manager-or-if-you-do-not-use-any-framework/\n */\nfunction resize(game: Game): void {\n    let width = 400;\n    \n    if (window.innerWidth === 428) { \n        width = 440;\n    } else if (window.innerWidth === 414) { \n        width = 414; \n    } else if (width > window.innerWidth) {\n        width = window.innerWidth;\n    }\n\n    const height = window.innerHeight;\n\n    if (game) {\n        game.scale.resize(width, height);\n        game.renderer.resize(width, height);\n        game.scene.scenes.forEach((scene) => {    \n            if (scene.cameras.main && scene.scene.isActive()) {\n                scene.cameras.main.setViewport(0, 0, width, height);\n                \n                const zoomFactor = window.innerWidth / 400;\n                scene.cameras.main.setZoom(zoomFactor);\n                \n                game.scale.refresh();\n                scene.cameras.main.flash(1000);\n                scene.scene.stop();\n                scene.scene.start();\n            }\n        });\n    }\n}\n\ntype PhaserGameOptions = {\n\tparent?: string;\n\tassetFolder? : string;\n\tonClose?: () => void;\n\tcouponcode?: string;\n\t// more options\n}\n\ndeclare global {\n\tinterface Window {\n\t\tnewGame: (options: PhaserGameOptions) => void;\n\t\tassetFolder?: string;\n\t\tgame?: Game;\n\t}\n}\n\n\nif (window) {\n\twindow.newGame = (options: PhaserGameOptions) => {\n\t\tconst newOptions = {...gameConfig, ...options}\n\n\t\tif(newOptions.assetFolder) window.assetFolder = newOptions.assetFolder;\n\t\tconst game = new Game(newOptions as Phaser.Types.Core.GameConfig & PhaserGameOptions);\t\n\t\twindow.game = game;\n\t\t// Uncomment the following two lines if you want the game to scale to fill the entire page, but keep the game ratio.\n\t\tresize(game);\n\t\twindow.addEventListener(\"resize\", () => resize(game), true);\n\t}\n\n\twindow.onload = (): void => {\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\tconst async = urlParams.get('async')\n\t\t\n\t\tif(!async) {\n\t\t\twindow.newGame({});\n\t\t} else {\n\t\t\tconsole.log(\"Waiting for instructions\")\n\t\t}\n\n\t}\n}\n","import { Button } from \"./Button\";\nimport { buttons } from \"../config\";\nimport { prompt } from \"../config\";\n\nexport class CloseButton {\n\tpublic static Name = \"CloseButtonScene\";\n\tprivate scene;\n\tprivate button: Button;\n\n\tconstructor(scene: Phaser.Scene) {\n\t\tthis.scene = scene;\n\t}\n\n\tpublic create(deviationX = 0, deviationY = 4) {\n\t\tconst margin = 35;\n\t\tthis.button = new Button(\n\t\t\tthis.scene,\n\t\t\tthis.scene.cameras.main.scrollX +\n\t\t\t\tthis.scene.cameras.main.width -\n\t\t\t\tmargin +\n\t\t\t\tdeviationX,\n\t\t\tthis.scene.cameras.main.scrollY + margin + deviationY,\n\t\t\tbuttons.close,\n\t\t\t1.05,\n\t\t\t1.05\n\t\t);\n\n\t\tthis.button.createButton();\n\n\t}\n\n\tpublic destroy() {\n\t\tthis.button.destroy();\n\t}\n}\n","\nexport class Footer {\n\n  public static create(scene: Phaser.Scene) {\n    scene.add.image(scene.cameras.main.centerX * 2, (scene.cameras.main.centerY * 2), \"powerBySvg\")\n\t\t.setInteractive()\n\t\t.on(\"pointerdown\", () => {\n\t\t\tif(window) window.open(\"https://minimalart.co/\", \"_blank\")\n\t\t})\n\t\t.setOrigin(1, 1)\n    .setDepth(110);\n  }\n\n}\n","\nimport { promptActions } from \"../types\"\nimport { EventObserver } from \"../observer\";\n\nexport class Button {\n    private button: Phaser.GameObjects.Image;\n\t  eventObserver: EventObserver;\n    \n    constructor(\n        private scene: Phaser.Scene,         // La escena actual de Phaser\n        private x: number,                   // Coordenada X\n        private y: number,                   // Coordenada Y\n        private action: promptActions,\n        private scaleX: number = 1,\n        private scaleY: number = 1,    \n    ) {\n\t\t this.eventObserver =  EventObserver.getInstance();\n    }\n\n    public createButton(): void {\n        this.button = this.scene.add.image(this.x, this.y, this.action.background)\n        .setInteractive()\n        .on('pointerdown', (e) => {\n            // this.pressButtonEffect();\n            this.eventObserver.emit('button-clicked', this.action.eventName);\n        })\n        .on('pointerup', () => {\n            this.releaseButtonEffect();\n        })\n        .on('pointerout', () => {\n            this.button.setTint(0xffffff);\n            this.releaseButtonEffect();\n        })\n        .setOrigin(0.5, 0.5)\n        .setDepth(100)\n        .setScale(this.scaleX, this.scaleY);\n\n    }\n\n    private pressButtonEffect(): void {\n        this.scene.tweens.add({\n          targets: this.button,\n          scaleX: this.scaleX * 0.9,  // Reduce la escala en el eje X\n          scaleY: this.scaleY * 0.9,  // Reduce la escala en el eje Y\n          duration: 100,\n          ease: 'Power1'\n        });\n      }\n    \n      private releaseButtonEffect(): void {\n        this.scene.tweens.add({\n          targets: this.button,\n          scaleX: this.scaleX,  // Vuelve a la escala original en el eje X\n          scaleY: this.scaleY,  // Vuelve a la escala original en el eje Y\n          duration: 300,\n          ease: 'Power1'\n        });\n      }\n\n    public destroy(): void {\n        this.button.destroy();\n    }\n}\n","export  { Button } from './Button';\nexport  { CloseButton } from './CloseButton';\nexport  { Score } from './Score'\n","export {EventObserver} from \"./EventObserver\"\n","import Utilities from \"../Utilities\";\nimport MainGame from \"./MainGame_Memo\";\nimport { CloseButton } from \"../components\";\nimport { RetryScreen } from '../Screen';\nimport { EventObserver } from \"../observer\";\nimport { ButtonEventHandler } from \"../handlers\";\nimport { Footer } from \"../components/Footer\";\n\nexport default class MainMenu extends Phaser.Scene {\n\tmusic: Phaser.Sound.BaseSound;\n\talreadyPlayignMusic = false\n\tcloseButton: CloseButton;\n\tretryScreen: RetryScreen;\n\teventObserver: EventObserver;\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"MainMenu\";\n\n\tpublic init(){\n\t\t//this.closeButton = new CloseButton(this);\n\t\tthis.retryScreen = new RetryScreen(this);\n\t\tthis.eventObserver = EventObserver.getInstance();\n\n\t\t// this.game.config.audio.disableWebAudio = true;\n\t\tthis.game.config.audio.disableWebAudio = false;\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t//@ts-ignore\n\t\tthis.game.soundManager = Phaser.Sound.SoundManagerCreator.create(this.game)\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t//@ts-ignore\n\t\tthis.music = this.game.soundManager;\n\t\tthis.game.sound.mute = false;\n\n\t}\n\n\tpublic preload(): void {\n\t\t// Preload as needed.\n\t}\n\n\tpublic pauseScene() {\n\t\tthis.scene.pause(MainMenu.Name)\n\t}\n\n\tpublic resumeScene() {\n\t\tthis.scene.resume(MainMenu.Name)\n\t}\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"MainMenu\", \"create\");\n\n\t\tif(!this.alreadyPlayignMusic) {\n\t\t\tthis.alreadyPlayignMusic = true;\n\t\t\t// this.music.play(\"music\",{\n\t\t\t// \tvolume: 0.06,\n\t\t\t// \tloop: true\n\t\t\t// });\n\t\t}\n\n        const background = this.add.image(this.cameras.main.centerX, this.cameras.main.height, \"background_main\");\n        background.setOrigin(0.5, 1); \n\n        let scaleX = this.cameras.main.width / background.width;\n        let scaleY = this.cameras.main.height / background.height;\n        let scale = Math.max(scaleX, scaleY);\n\n        background.setScale(scale);\n\n\n\t\t// const soundBtn = this.add.image(35, 55, \"sound_on\").setScale(0.5);\n\t\t// soundBtn.setOrigin(0.5, 0.5);\n\t\t// soundBtn.setInteractive();\n\t\t// soundBtn.on(\"pointerdown\", () => {\n\t\t// \tconst newMuteValue = !this.game.sound.mute;\n\t\t// \tthis.game.sound.mute = newMuteValue\n\t\t// \t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// \t//@ts-ignore\n\t\t// \tthis.music.setMute(newMuteValue)\n\t\t// \tsoundBtn.setTexture(newMuteValue ? \"sound_off\" : \"sound_on\");\n\t\t// }, this);\n\n\n        const logoArcor = this.add.image(this.cameras.main.centerX, 50, \"logo_Arcor\").setScale(0).setOrigin(0.5, 0);\n        this.tweens.add({\n\t\t\ttargets: logoArcor,\n\t\t\tscale: 1,\n\t\t\tdelay:0,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        const candie1 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies_logo\", 7).setOrigin(0.5).setScale(0).setDepth(1);\n\t\tconst candie2 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies_logo\", 2).setOrigin(0.5).setScale(0).setDepth(2);\n\t\tconst candie3 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies_logo\", 4).setOrigin(0.5).setScale(0).setDepth(0);\n        const candie4 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies_logo\", 5).setOrigin(0.5).setScale(0).setDepth(0);\n\t\tconst candie5 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies_logo\", 3).setOrigin(0.5).setScale(0).setDepth(2);\n\t\tconst candie6 = this.add.image(this.cameras.main.centerX, (this.cameras.main.centerY * 0.6) + 40, \"candies_logo\", 8).setOrigin(0.5).setScale(0).setDepth(1);\n\n\t\tconst baseX = candie1.x\n\t\tconst baseY = candie1.y\n\n\t\tthis.tweens.add({\n\t\t\ttargets: candie1,\n\t\t\tscale: 1.2,\n\t\t\tx: baseX - 115,\n\t\t\ty: baseY - 15,\n\t\t\tangle: -15,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: [candie1],\n\t\t\tscale: 1.3,\n\t\t\tdelay:1300,\n\t\t\tangle: -20,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\t\t\n\t\tthis.tweens.add({\n\t\t\ttargets: candie2,\n\t\t\tscale: 0.8,\n\t\t\tx: baseX - 80,\n\t\t\ty: baseY - 40,\n\t\t\tangle: -25,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: [candie2],\n\t\t\tscale: 0.9,\n\t\t\tdelay:1100,\n\t\t\tangle: -19,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: candie3,\n\t\t\tscale: 0.7,\n\t\t\tx: baseX - 55,\n\t\t\ty: baseY - 50,\n\t\t\tangle: -10,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: [candie3],\n\t\t\tscale: 0.7,\n\t\t\tdelay:1100,\n\t\t\tangle: -11,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: candie4,\n\t\t\tscale: 0.7,\n\t\t\tx: baseX + 50,\n\t\t\ty: baseY - 50,\n\t\t\tangle: -10,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: [candie4],\n\t\t\tscale: 0.8,\n\t\t\tdelay: 1300,\n\t\t\tangle: -11,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: candie5,\n\t\t\tscale: 1,\n\t\t\tx: baseX + 85,\n\t\t\ty: baseY - 40,\n\t\t\tangle: -40,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: [candie5],\n\t\t\tscale: 1.1,\n\t\t\tdelay: 1200,\n\t\t\tangle: -45,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: candie6,\n\t\t\tscale: 1.1,\n\t\t\tx: baseX + 120,\n\t\t\ty: baseY - 30,\n\t\t\tangle: 20,\n\t\t\tdelay:600,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\n        this.tweens.add({\n\t\t\ttargets: [candie6],\n\t\t\tscale: 1.1,\n\t\t\tdelay: 900,\n\t\t\tangle: 25,\n\t\t\tduration: 300,\n\t\t\tease: \"Power1\",\n\t\t\tyoyo: true,\n\t\t\tloop: -1\n\t\t});\n\n        const logo = this.add.image(this.cameras.main.centerX, this.cameras.main.centerY * 0.5, \"logo_candy_Arcor\").setScale(0).setDepth(6);\n        this.tweens.add({\n\t\t\ttargets: logo,\n\t\t\tscale: 1.1,\n\t\t\tdelay:0,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\t\tlogo.setOrigin(0.5, 0);\n\n        const playButton = this.add.image(this.cameras.main.centerX, this.cameras.main.centerY * 1.2, \"play\").setScale(0);\n        this.tweens.add({\n\t\t\ttargets: playButton,\n\t\t\tscale: 1,\n\t\t\tdelay:200,\n\t\t\tduration: 600,\n\t\t\tease: \"Bounce.easeOut\"\n\t\t});\n\t\tplayButton.setOrigin(0.5, 0.5);\n\t\tplayButton.setInteractive();\n\t\tplayButton.on(\"pointerover\", () => { playButton.setTint(0xeeeeee); }, this);\n\t\tplayButton.on(\"pointerout\", () => { playButton.setTint(0xffffff); }, this);\n\t\tplayButton.on(\"pointerdown\", () => { this.scene.start(MainGame.Name); }, this);\n\n        Footer.create(this);\n\t}\n\n\tpublic update(): void {\n\t\t// Update logic, as needed.\n\t}\n}\n","export class LevelUpScreen {\n  private scene: Phaser.Scene;\n  private container: Phaser.GameObjects.Container;\n  private background: Phaser.GameObjects.Image;\n  private titleText: Phaser.GameObjects.Text;\n  private goalText: Phaser.GameObjects.Text;\n\n  constructor(scene: Phaser.Scene) {\n    this.scene = scene;\n\n    const centerX = this.scene.cameras.main.centerX;\n    const centerY = this.scene.cameras.main.centerY;\n\n    // Fondo del modal\n    this.background = this.scene.add.image(centerX, centerY, 'prompt_bg')\n      .setOrigin(0.5)\n      .setScale(1.2);\n\n    // Título\n    this.titleText = this.scene.add.text(centerX, centerY - 40, '', {\n      font: '32px montserrat-memo',\n      color: '#FFFFFF',\n      align: 'center'\n    }).setOrigin(0.5);\n\n    // Meta de puntos\n    this.goalText = this.scene.add.text(centerX, centerY + 20, '', {\n      font: '26px montserrat-memo',\n      color: '#FEC647',\n      align: 'center'\n    }).setOrigin(0.5);\n\n    // Agrupamos todo en un contenedor y lo ocultamos inicialmente\n    this.container = this.scene.add.container(0, 0, [\n      this.background,\n      this.titleText,\n      this.goalText\n    ]).setDepth(1000).setVisible(false);\n  }\n\n  show(level: number, goal: number) {\n    this.titleText.setText(`¡Nivel ${level}!`);\n    this.goalText.setText(`Meta: ${goal} puntos`);\n    this.container.setVisible(true);\n\n    // Ocultarlo automáticamente después de 2.5 segundos\n    this.scene.time.delayedCall(2700, () => {\n      this.container.setVisible(false);\n    });\n  }\n}\n","export {ButtonEventHandler} from './ButtonEventHandler'\n","\nimport { RetryScreen } from \"../Screen\";\nimport { prompt } from \"../config\";\n\nexport default class LeavingGameScene extends Phaser.Scene {\n\n  public static Name = 'LeavingGameScene';\n  \n  constructor() {\n      super({ key: 'LeavingGameScene' });\n  }\n\n  create() {\n    const leavingScreen = new RetryScreen(this);\n    leavingScreen.addMask();\n    leavingScreen.show(prompt.leaving, \"prompt_screen\")\n  }\n}\n","import Screen from \"./Screen\";\nimport { Button } from \"../components\";\nimport { promptActions } from \"../types\";\n\nexport class PromptScreen extends Screen {\n  protected promptTitle: Phaser.GameObjects.Image;\n  protected promptMessage: Phaser.GameObjects.Image;\n  protected background: Phaser.GameObjects.Image;\n  protected actions: Button[] = [];\n\n  constructor(\n    scene: Phaser.Scene\n  ) {\n    super(scene);\n  }\n\n  setSplashBackground() {\n    super.setSplashBackground();\n  }\n\n  addMask() {\n    super.addMask();\n  }\n\n  setBackground(promptType: string, deviationX=0, deviationY=0, scaleX=1, scaleY=1) {\n    this.background = this.scene.add.image(this.scene.cameras.main.centerX + (deviationX), this.scene.cameras.main.centerY + (deviationY), promptType)\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(scaleX, scaleY);\n  }\n\n  setTitle(promptTitle: string, deviationX=0, deviationY=0, scaleX=1, scaleY=1) {\n    this.promptTitle = this.scene.add.image(this.scene.cameras.main.centerX + (deviationX), this.scene.cameras.main.centerY + (deviationY), promptTitle)\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(scaleX, scaleY);\n  }\n\n  setMessage(promptMessage: string, deviationX=0, deviationY=0, scaleX=1, scaleY=1) {\n    this.promptMessage = this.scene.add.image(this.scene.cameras.main.centerX + (deviationX), this.scene.cameras.main.centerY + (deviationY), promptMessage)\n    .setOrigin(0.5, 0.5)\n    .setDepth(10)\n    .setScale(scaleX, scaleY);\n  }\n\n  setActions(promptActions: Array<promptActions>, deviationX=0, deviationY=0, separation=0, scaleX=1, scaleY=1) {\n    promptActions.forEach((action, index) => {\n      const button = new Button(\n          this.scene,\n          this.scene.cameras.main.centerX + deviationX,\n          this.scene.cameras.main.centerY + deviationY + (index * separation),\n          action,\n          scaleX,\n          scaleY\n      );\n      button.createButton();\n      this.actions.push(button);\n    });\n  }\n\n  show(): void {}\n\n  hide(): void {\n    this.promptTitle.destroy();\n    this.promptMessage.destroy();\n    this.background.destroy();    \n    this.actions.forEach(button => button.destroy());\n  }\n}\n","import Game from \"../Game\";\nimport copy from 'copy-to-clipboard';\n\nexport class ButtonEventHandler {\n    public static handleButtonEvents(buttonId: string, scene: Phaser.Scene) {\n        let sound = scene.sound.add(\"cash\");\n\n        switch (buttonId) {\n            case \"close\":\n                ButtonEventHandler.handleCloseEvent(scene);\n                break;\n\n            case \"back\":\n                ButtonEventHandler.handleBackEvent(scene);\n                break;\n\n            case \"exit\":\n                if ((scene.game as Game).onCloseGame) (scene.game as Game).onCloseGame();\n                window.location.href = 'https://arcorencasa.com/tienda/';\n                break;\n\n            case \"retry\":\n                ButtonEventHandler.handlePlayAgain(scene);\n                break;\n\n            case \"copy\":\n                ButtonEventHandler.handleCopyCode(scene);\n                sound.play();\n                break;\n\n            default:\n                console.log(\"Botón no reconocido:\", buttonId);\n                break;\n        }\n    }\n\n    private static handleCloseEvent(scene: Phaser.Scene) {\n        scene.scene.launch(\"LeavingGameScene\");\n        scene.scene.pause();\n    }\n\n    private static handleBackEvent(scene: Phaser.Scene) {\n        scene.scene.resume();\n        scene.scene.stop(\"LeavingGameScene\");\n    }\n\n    private static handlePlayAgain(scene: Phaser.Scene) {\n        scene.scene.stop('MainMenu');\n        scene.scene.restart();\n    }\n\n    // Método que detecta si es iOS\n    /*private static isIOS() {\n        return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    }*/\n    \n    // Método para copiar el texto en otros navegadores o usando el fallback\n    private static fallbackCopyTextToClipboard(text: string) {\n        const textArea = document.createElement('textarea');\n        textArea.value = text;\n        textArea.style.position = 'fixed';\n        textArea.style.left = '-9999px'; // Moverlo fuera de la pantalla\n        document.body.appendChild(textArea);\n\n        textArea.select();\n        try {\n            document.execCommand('copy');\n            console.log('Texto copiado usando el fallback');\n        } catch (err) {\n            console.error('Error al copiar el texto usando el fallback', err);\n        }\n\n        document.body.removeChild(textArea);\n    }\n\n    // Modificar handleCopyCode para usar la nueva lógica\n    private static handleCopyCode(scene: Phaser.Scene) {\n        const code = (scene.game as Game).selectedCoupon;\n\n        if (navigator.clipboard) {\n            navigator.clipboard.writeText(code).then(() => {\n                //console.log(\"Copiado con clipboard API\");\n            }).catch(err => {\n                //console.warn(\"Clipboard API falló, usando fallback\", err);\n                ButtonEventHandler.fallbackCopyTextToClipboard(code);\n            });\n        } else {\n            ButtonEventHandler.fallbackCopyTextToClipboard(code);\n        }\n    }\n}\n","export default class Utilities {\n\t/**\n\t * Logs a particular message to the console.\n\t * @param message Message to log.\n\t */\n\tpublic static Log(message: string): void {\n\t\tconsole.log((new Date()).toISOString() + \" : \" + message);\n\t}\n\n\t/**\n\t * Logs the start of a method in a scene.\n\t * @param sceneName Name of the scene.\n\t * @param method Method called within the scene.\n\t */\n\tpublic static LogSceneMethodEntry(sceneName: string, method: string): void {\n\t\tthis.Log(\"Entered \" + sceneName + \" \" + method + \"()\");\n\t}\n}\n","export * from \"./config\"\n","import Utilities from \"../Utilities\";\nimport MainMenu from \"./MainMenu\";\n\nexport default class MainSettings extends Phaser.Scene {\n\t/**\n\t * Unique name of the scene.\n\t */\n\tpublic static Name = \"MainSettings\";\n\n\tpublic create(): void {\n\t\tUtilities.LogSceneMethodEntry(\"MainSettings\", \"create\");\n\t\tconst startYPosition = this.cameras.main.height / 4;\n\t\tconst fontSize = 25;\n\n\t\t// Add a button to return to the main menu.\n\t\tconst backText = this.add.text(this.cameras.main.centerX, startYPosition * 2, \"Go Back\");\n\t\tbackText\n\t\t\t.setOrigin(0.5)\n\t\t\t.setFontFamily(\"monospace\").setFontSize(fontSize).setFill(\"#fff\")\n\t\t\t.setInteractive();\n\t\tbackText.on(\"pointerdown\", () => { this.scene.start(MainMenu.Name); }, this);\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(552);\n"],"names":["module","exports","Phaser","MainGame","Scene","withPreview","withRestartTime","scoreValue","resizeApplied","cellSizeX","cellSizeY","flipSpeed","flipZoom","limitTime","maxTime","baseScale","targetScore","splitter","rows","columns","nextLevelTimer","state","previewGoing","flippedCards","levelDificulty","configDificulty","init","this","resetGameState","window","innerHeight","preload","exist","a","getScoreValue","checkMatch","behindFrame","disableInteractive","pending","tweens","add","targets","alpha","duration","yoyo","group","getChildren","filter","card","length","setTimeout","createNextGame","clearTimeout","Number","scoreText","setText","toString","y","scaleY","ease","onComplete","sound","play","i","obj","flipTween","isReversed","callback","check","isFlipping","push","game","mute","volume","scaleX","setFrame","makeCardInteractive","setScale","frame","name","setInteractive","on","createGrid","config","middlePoint","cameras","main","centerX","centerY","amountOfTiles","tilesRow","tilesColumn","possibleFrames","textures","get","getFrameNames","shift","frames","Math","RND","pick","emptyGroup","Utils","Array","Shuffle","sprite","Actions","GridAlign","width","height","cellWidth","cellHeight","position","Display","Align","CENTER","x","correctionX","correctionY","forEach","clear","dificulty","timer","remove","startTimer","endGame","winnerScreen","show","prompt","win","retryScreen","setFinalScore","narrowly","retry","removeInteractivityCards","resetValues","adjustDepth","score","depthScore","depthScoreText","setDepth","newLimit","baseTime","progress","time","addEvent","delay","progressBar","setCrop","loop","setSoundBtn","soundBtn","image","setOrigin","newMuteValue","soundManager","setMute","setTexture","create","WinnerScreen","RetryScreen","closeButton","CloseButton","eventObserver","EventObserver","getInstance","LogSceneMethodEntry","background","text","font","color","overProgressFrame","powerBy","open","registry","set","buttonId","ButtonEventHandler","handleButtonEvents","Name","eventEmitter","Events","EventEmitter","instance","event","context","emit","args","Boot","scene","start","SplashScreen","load","path","assetFolder","setBackground","loadMainMenu","callbackScope","constructor","PromptScreen","addMask","promptContent","promptType","setTitle","title","setMessage","message","setActions","actions","Footer","setSplashBackground","finalScore","finalScoreText","hide","LEVELS","level","goal","grid","offsetX","offsetY","selectedCandy","movingCandiesInProcess","scoreGoal","currentLevelIndex","totalTime","matchValue","comboCount","comboThreshold","gameState","getCandyPosition","row","col","CANDY_WIDTH","CANDY_HEIGHT","scale","gridHeight","candyType","Between","candy","createCandy","matches","getMatches","console","log","removeMatches","delayedCall","dropCandies","refillGrid","comboText","setY","setData","pointer","dx","getData","dy","abs","trySwap","direction","targetRow","targetCol","neighbor","swapCandies","areAdjacent","c1","c2","row1","col1","row2","col2","swapCandySound","Set","match","current","prev","unshift","c","from","updateScore","points","progressTimer","nextLevel","updateProgressBar","barWidth","fillStyle","fillRoundedRect","newLevel","levelUpScreen","levelUpSound","async","destroy","basePoints","comboSound","showComboText","comboTimer","setAlpha","GRID_HEIGHT","aboveRow","candyAbove","Promise","resolve","initialY","newMatches","hasPossibleMoves","showShuffleMessage","shuffleCandySound","shuffleBoard","swapData","currentType","GRID_WIDTH","right","down","attempts","candies","warn","hasMoves","setPosition","bg","rectangle","fontSize","fontFamily","data","levelIndex","LevelUpScreen","fontStyle","scoreImage","scoreWidth","scoreHeight","progressFrame","graphics","events","Clamp","getElapsed","Preloader","spritesheet","frameWidth","frameHeight","svg","audio","addProgressBar","update","progressBox","fillRect","loadingText","make","style","percentText","assetText","value","parseInt","buttons","eventName","exitArcor","back","copy","close","copied","leaving","setSplashLogo","setWinnerScore","setWinnerCouponCode","logo","couponCodeContainer","couponCode","getCouponCode","mask","gameConfig","innerWidth","type","AUTO","transparent","parent","Game","super","selectedCoupon","onCloseGame","onClose","getRandomCoupon","coupons","floor","random","resize","renderer","scenes","isActive","setViewport","zoomFactor","setZoom","refresh","flash","stop","newGame","options","newOptions","addEventListener","onload","queryString","location","search","URLSearchParams","deviationX","deviationY","button","Button","scrollX","scrollY","createButton","action","e","releaseButtonEffect","setTint","pressButtonEffect","Score","MainMenu","alreadyPlayignMusic","disableWebAudio","Sound","SoundManagerCreator","music","pauseScene","pause","resumeScene","resume","max","logoArcor","candie1","candie2","candie3","candie4","candie5","candie6","baseX","baseY","angle","playButton","titleText","align","goalText","container","setVisible","LeavingGameScene","key","leavingScreen","promptTitle","promptMessage","promptActions","separation","index","handleCloseEvent","handleBackEvent","href","handlePlayAgain","handleCopyCode","launch","restart","fallbackCopyTextToClipboard","textArea","document","createElement","left","body","appendChild","select","execCommand","err","error","removeChild","code","navigator","clipboard","writeText","then","catch","Log","Date","toISOString","sceneName","method","MainSettings","startYPosition","backText","setFontFamily","setFontSize","setFill","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"sourceRoot":""}